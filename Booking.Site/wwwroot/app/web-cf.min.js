function resizeBrowser(){var n=window.outerWidth,t=window.outerHeight;window.resizeTo(n-1,t);window.resizeTo(n+1,t)}function scrollElement(n){var t=document.getElementById(n),i,r;return t?(i=t.getBoundingClientRect(),r=i.top>=0&&i.bottom<=window.innerHeight,r||t.scrollIntoView(),!r):!1}function constructor(n){if(!n)throw new Error("classname is empty");var t=window,i=n.split(".");return i.forEach(function(n){return t=t[n]}),t}function getPropValue(n,t){for(var r,i=n,u=t.split("."),e=u.length,f=0;f<e-1;f++)r=u[f],i[r]||(i[r]={}),i=i[r];return i[u[e-1]]}function setPropValue(n,t,i){for(var u,r=n,f=t.split("."),o=f.length,e=0;e<o-1;e++)u=f[e],r[u]||(r[u]={}),r=r[u];r[f[o-1]]=i}function percent(n,t){if(!n||!t)return 0;var i=n*100/t;return Math.floor(i)}function html2text(n){span==null&&(span=document.createElement("span"));span.innerHTML=n;return span.textContent||span.innerText}function Guid(){var n=(new Date).getTime();return window.performance&&typeof window.performance.now=="function"&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&3|8).toString(16)})}function copy(n,t,i){i===void 0&&(i=!0);var r=Object.getOwnPropertyNames(t);r.forEach(function(i){n[i]=t[i]})}function getSelectedText(){var n="",t;return window.getSelection?n=window.getSelection().toString():document.getSelection&&(t=document.getSelection(),n=t.getRangeAt(0).toString()),n}function getSelectedHtml(){var r="",n,i,t,u;if(typeof getSelection!="undefined"){if(n=window.getSelection(),n.rangeCount){for(i=document.createElement("div"),t=0,u=n.rangeCount;t<u;++t)i.appendChild(n.getRangeAt(t).cloneContents());r=i.innerHTML}}else throw new Error("Clipboard Error");return r}function pad(n){return n<10?"0"+n:n}function dateFormat(n,t){if(t===void 0&&(t=!0),!n)return"";var i=t?[""+n.getDate(),""+(n.getMonth()+1),""+n.getFullYear(),""+n.getHours(),""+n.getMinutes()]:[""+n.getDate(),""+(n.getMonth()+1),""+n.getFullYear()];return i.slice(0,3).join(".")+" "+i.slice(3).join(":")}function jsonDateParse(n,t){return typeof t=="string"&&t!==null&&isValidDate(t)?parseDate(t):t}function parseDate(n){var t=Date.parse(n);return t?new Date(t):n}function isValidDate(n){return n?n instanceof Date?!0:typeof n.getMonth=="function"?!0:n.match?n.match(regDate)!=null:!1:!1}function getWeekDay(n){return n?__days[n.getDay()]:""}function passedTime(n){var t=It.UI.coreLocale.Date,o,i,r,u,f,e;return n?(o=Date.now(),i=o-n.getTime(),i<0)?t.Wait:i<1e3?t.Just:(r=Math.floor(i/1e3),r<60)?r+" "+t.Sec+" "+t.Ago:(u=Math.floor(r/60),u<60)?u+" "+t.Min+" "+t.Ago:(f=Math.floor(u/60),f<24)?f+" "+t.Hour+" "+t.Ago:(e=Math.floor(f/24),e<10)?e+" "+t.Day+" "+t.Ago:dateFormat(n):""}var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),warr,span,regDate,__days,Symbols,regex,app,$u,auth_logins,skins,It;(function(n){var t;(function(n){n.Ru={Controls:{Ok:"Выполнить",Cancel:"Отмена",Clear:"Очистить",Close:"Закрыть",Back:"Назад",Add:"Создать",Del:"Удалить",Refresh:"Обновить",Save:"Сохранить",Window:"Окно",DelAsk:"Удалить выделенные записи?",PhotoDragDrop:"Загрузите фото или перетащите мышью"},Msg:{Reloaded:"Данные обновлены"},Date:{Wait:"ждем",Just:"только что",Sec:"сек.",Min:"мин.",Hour:"час.",Day:"дн.",Ago:"назад"},Tooltips:{Add:"Добавить новую запись",AddTop:"Добавить корневую",AddSub:"Добавить вложенную",Del:"Удалить выделенные записи",Save:"Сохранить изменения на сервере",Refresh:"Обновить данные",Expand:"Развернуть поддерево",Collapse:"Свернуть поддерево"},Excel:{Label:"Данные из Excel",Help:"Скопируйте и вставьте строки в Excel",Insert:"Вставьте строки из Excel",Schema:"Схема",InsertLabel:"Вставить",ResultLabel:"Импорт завершен"},System:{LoginLink:"Вход",LoginLabel:"Логин",LoginHeader:"ВХОД В СИСТЕМУ",Logout:"Выход",PasswordLabel:"Пароль",PasswordLabel2:"Пароль (повтор)",NotLogged:"Гость",LoginOK:"Войти",LoginCancel:"Закрыть",RegisterHeader:"РЕГИСТРАЦИЯ ПОЛЬЗОВАТЕЛЯ",NameLabel:"ФИО",EmailLabel:"E-mail (Логин)",RegisterOK:"Регистрировать",RegisterResult:"Вы успешно зарегистрировались"}};var t=window.webix.i18n;t&&(t.pivot={columns:"Колонки",count:"кол",fields:"Поля",filters:"Фильтр",max:"макс",min:"мин",operationNotDefined:"Операция не определена",pivotMessage:"[Настройка]",rows:"Строки",select:"выбор",sum:"сум",text:"текст",values:"Значения",windowTitle:"Конфигурация",windowMessage:"[Передвиньте поле в нужную область]"})})(t=n.UI||(n.UI={}))})(It||(It={})),function(n){var t;(function(n){n.En={Controls:{Ok:"Ok",Cancel:"Cancel",Clear:"Clear",Close:"Close",Back:"Back",Add:"Add",Del:"Delete",Refresh:"Refresh",Save:"Save",Window:"Window",DelAsk:"Delete selected records?",PhotoDragDrop:"Open or drag&drop Image"},Msg:{Reloaded:"List reloaded"},Date:{Wait:"wait",Just:"just ",Sec:"sec.",Min:"min.",Hour:"hr.",Day:"d.",Ago:"ago"},Tooltips:{Add:"Add new item",AddTop:"Add root",AddSub:"Insert SubItem",Del:"Delete selected items",Save:"Save changes",Refresh:"Reload data",Expand:"Expand subtree",Collapse:"Collapse subtree"},Excel:{Label:"Data from Excel",Help:"Copy & Paste rows in Excel",Insert:"Paste rows from Excel",Schema:"Schema",InsertLabel:"Paste",ResultLabel:"Import complete"},System:{LoginLink:"Login",LoginLabel:"Login",LoginHeader:"LOGIN FORM",Logout:"Logout",PasswordLabel:"Password",PasswordLabel2:"Password (confirm)",NotLogged:"Guest",LoginOK:"Sign In",LoginCancel:"Close",RegisterHeader:"REGISTER FORM",NameLabel:"Name",EmailLabel:"E-mail (Login)",RegisterOK:"Register",RegisterResult:"You have successfully registered"}}})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){n.loc=n.Ru})(t=n.UI||(n.UI={}))}(It||(It={}));warr=window.Array;warr.prototype.find||(warr.prototype.find=function(n){var t;if(this==null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof n!="function")throw new TypeError("predicate must be a function");var i=Object(this),u=i.length>>>0,f=arguments[1],r;for(t=0;t<u;t++)if(r=i[t],n.call(f,r,t,i))return r;return undefined}),function(n){var t;(function(n){n.locEn={Err:{Error:"Error",UnknownError:"Unknown error without details",AccessError:"Access error: ",ErrorText:"Ooops!! Unexpected error",ResNotFound:"Server resource not found",ValidationError:"Data validation error",ValidationRequire:"Requires value",TemplateError:"Error on load HTML: ",ClipboardError:"Can't paste HTML"},Date:{Wait:"wait",Just:"just ",Sec:"sec.",Min:"min.",Hour:"hr.",Day:"d.",Ago:"ago"}};n.locRu={Err:{Error:"Ошибка",UnknownError:"(не получена детальная информация об ошибке)",AccessError:"Ошибка доступа, или не выполнен вход в систему",ErrorText:"Произошла неожиданная ошибка",ResNotFound:"Серверный ресурс не найден",ValidationError:"Ошибка данных",ValidationRequire:"Заполните значение поля",TemplateError:"Ошибка при загрузке HTML: ",ClipboardError:"Не поддерживается вставка HTML из буфера"},Date:{Wait:"ждем",Just:"только что",Sec:"сек.",Min:"мин.",Hour:"час.",Day:"дн.",Ago:"назад"}};n.coreLocale=n.locRu})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t={};n.message2=function(n){return t.message(n)};n.message=function(n,i){return t.message({text:n,expire:4e3,type:i})};n.confirmDialog=function(n){return t.confirm(n)};n.alertDialog=function(n){return t.alert(n)};n.alert=function(n,i,r){return t.alert({title:i,text:n,type:r})};n.error=function(n,i){return t.alert({title:i,text:n,type:"error"})};n.blinkTab=function(n){var i=document.title,t,r=function(){document.title=document.title==n?" ":n},u=function(){clearInterval(t);document.title=i;window.onmousemove=null;t=null};t||(t=setInterval(r,1e3),window.onmousemove=u)},function(){function u(n,t){var i=n.callback;e(!1);n.box.parentNode.removeChild(n.box);r=n.box=null;i&&i(t)}function f(n){if(r){n=n||event;var i=n.which||event.keyCode;return t.message.keyboard&&((i==13||i==32)&&u(r,!0),i==27&&u(r,!1)),n.preventDefault&&n.preventDefault(),!(n.cancelBubble=!0)}}function e(n){i||(i=document.createElement("DIV"),i.onkeydown=f,i.className="dhx_modal_cover",document.body.appendChild(i));var t=document.body.scrollHeight;i.style.display=n?"inline-block":"none"}function o(n,t){return"<div class='ithtml_popup_button' result='"+t+"' ><div>"+n+"<\/div><\/div>"}function v(t){n.area||(n.area=document.createElement("DIV"),n.area.className="ithtml_message_area",n.area.style[n.position]="5px",document.body.appendChild(n.area));n.hide(t.id);var i=document.createElement("DIV");return i.innerHTML="<div>"+t.text+"<\/div>",i.className="ithtml-info ithtml-"+t.type,i.onclick=function(){n.hide(t.id);t=null},n.position=="bottom"&&n.area.firstChild?n.area.insertBefore(i,n.area.firstChild):n.area.appendChild(i),t.expire>0&&(n.timers[t.id]=window.setTimeout(function(){n.hide(t.id)},t.expire)),n.pull[t.id]=i,i=null,t.id}function y(n,t,i){var f=document.createElement("DIV"),e,h,s;if(f.className=" ithtml_modal_box ithtml-"+n.type,f.setAttribute("dhxbox","1"),e="",n.width&&(f.style.width=n.width),n.height&&(f.style.height=n.height),n.title&&(e+='<div class="ithtml_popup_title">'+n.title+"<\/div>"),e+='<div class="ithtml_popup_text"><span>'+(n.content?"":n.text)+'<\/span><\/div><div  class="ithtml_popup_controls">',t&&(e+=o(n.ok||"OK",!0)),i&&(e+=o(n.cancel||"Cancel",!1)),n.buttons)for(h=0;h<n.buttons.length;h++)e+=o(n.buttons[h],h);return e+="<\/div>",f.innerHTML=e,n.content&&(s=n.content,typeof s=="string"&&(s=document.getElementById(s)),s.style.display=="none"&&(s.style.display=""),f.childNodes[n.title?1:0].appendChild(s)),f.onclick=function(t){var i,r;t=t||event;i=t.target||t.srcElement;i.className||(i=i.parentNode);i.className=="ithtml_popup_button"&&(r=i.getAttribute("result"),r=r=="true"||(r=="false"?!1:r),u(n,r))},n.box=f,(t||i)&&(r=n),f}function s(n,i,r){var u=n.tagName?n:y(n,i,r),o,s;return n.hidden||e(!0),document.body.appendChild(u),o=n.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-u.offsetWidth)/2)),s=n.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-u.offsetHeight)/2)),u.style.top=n.position=="top"?"-3px":s+"px",u.style.left=o+"px",u.onkeydown=f,u.focus(),n.hidden&&t.modalbox.hide(u),u}function c(n){return s(n,!0,!1)}function l(n){return s(n,!0,!0)}function a(n){return s(n)}function h(n,t,i){return typeof n!="object"&&(typeof t=="function"&&(i=t,t=""),n={text:n,type:t,callback:i}),n}function p(t,i,r,u){return typeof t!="object"&&(t={text:t,type:i,expire:r,id:u}),t.id=t.id||n.uid(),t.expire=t.expire||n.expire,t}var r=null,i,n;document.addEventListener("keydown",f,!0);t.alert=function(){var n=h.apply(this,arguments);return n.type=n.type||"confirm",c(n)};t.confirm=function(){var n=h.apply(this,arguments);return n.type=n.type||"alert",l(n)};t.modalbox=function(){var n=h.apply(this,arguments);return n.type=n.type||"alert",a(n)};t.modalbox.hide=function(n){while(n&&n.getAttribute&&!n.getAttribute("dhxbox"))n=n.parentNode;n&&(n.parentNode.removeChild(n),e(!1))};n=t.message=function(n){n=p.apply(this,arguments);n.type=n.type||"info";var t=n.type.split("-")[0];switch(t){case"alert":return c(n);case"confirm":return l(n);case"modalbox":return a(n);default:return v(n)}};n.seed=(new Date).valueOf();n.uid=function(){return n.seed++};n.expire=4e3;n.keyboard=!0;n.position="top";n.pull={};n.timers={};n.hideAll=function(){for(var t in n.pull)n.hide(t)};n.hide=function(t){var i=n.pull[t];i&&i.parentNode&&(window.setTimeout(function(){i.parentNode.removeChild(i);i=null},2e3),i.className+=" hidden",n.timers[t]&&window.clearTimeout(n.timers[t]),delete n.pull[t])}}()})(t=n.UI||(n.UI={}))}(It||(It={}));Array.prototype.findById=function(n,t){if(!n)return t;var i=this.find(function(t){return t.id==n});return i?i:t};Array.prototype.idval=function(n,t){if(t===void 0&&(t=""),!n)return t;var i=this.findById(n);return i?i.value:t};Array.prototype.insert=function(n,t){this.splice(n,0,t)};Array.prototype.remove=function(n){var t=this.indexOf(n);return t<0?-1:(this.splice(t,1),t)};Array.prototype.filterNotEmpty=function(){return this.filter(function(n){return!!n})};Array.prototype.clear=function(){this.splice(0,this.length)};window.scrollElement=scrollElement;Date.prototype.isWeekend=function(){var n=this.getDay();return n==6||n==0};Date.prototype.addHours=function(n){var t=new Date(this.valueOf());return t.setHours(t.getHours()+n),t};Date.prototype.addDays=function(n){var t=new Date(this.valueOf());return t.setDate(t.getDate()+n),t};Date.prototype.addMonth=function(n){var t=new Date(this.valueOf());return t.setMonth(t.getMonth()+n),t};Date.prototype.toLocaleJSON=function(){return this.getFullYear()+"-"+pad(this.getMonth()+1)+"-"+pad(this.getDate())+"T"+pad(this.getHours())+":"+pad(this.getMinutes())+":"+pad(this.getSeconds())+"."+(this.getMilliseconds()/1e3).toFixed(3).slice(2,5)};regDate=/^\d{4}-\d{2}-\d{2}.*$/;__days=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],function(n){n.dateDiff={format:dateFormat,weekDay:getWeekDay,valid:isValidDate,parse:parseDate,inHoursAbs:function(t,i){return i===void 0&&(i=new Date),Math.abs(n.dateDiff.inHours(t,i))},inHours:function(n,t){if(t===void 0&&(t=new Date),!n)return 0;var i=t.getTime(),r=n.getTime();return(i-r)/36e5},inDays:function(n,t){if(t===void 0&&(t=new Date),!n)return 0;var i=t.getTime(),r=n.getTime();return(i-r)/864e5},inWeeks:function(n,t){if(t===void 0&&(t=new Date),!n)return 0;var i=t.getTime(),r=n.getTime();return(i-r)/6048e5},inMonths:function(n,t){if(t===void 0&&(t=new Date),!n)return 0;var i=n.getFullYear(),r=t.getFullYear(),u=n.getMonth(),f=t.getMonth();return f+12*r-(u+12*i)},inYears:function(n,t){return(t===void 0&&(t=new Date),!n)?0:t.getFullYear()-n.getFullYear()},inPassedTime:passedTime}}(It||(It={}));Symbols={calendar:"&#128197;",pencil0:"&#9016",pencil1:"&#9997",pencil:"&#9998;",play:"►",pencil3:"&#128393;",basket:"&#128722;",Check:"✔",Cross:"✘"};String.prototype.replaceAll=function(n,t){if(!this)return"";return this.replace(new RegExp(n,"g"),t)};String.prototype.maxleft=function(n){return this?this.length<n?this+"":this.substring(0,n):""};String.prototype.htmlEncode=function(){return this?this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(?:\r\n|\r|\n)/g,"<br/>"):""};regex=/[?&]([^=#]+)=([^&#]*)/g;String.prototype.parseUrl=function(n){if(!n)return{};for(var i={},t;t=regex.exec(n);)i[t[1]]=t[2];return i};String.prototype.link=function(n,t){return n?(t===!0&&(t={target:"_blank"}),t?t.href=n:t={href:n},this.tag("a",t)):this};String.prototype.tag=function(n,t){if(!n)return this;var i=It.Web.args2attr(t);return"<".concat(n," ").concat(i,">").concat(this,"<\/").concat(n,">")};String.prototype.img=function(n){var t=It.Web.args2attr(n);return"<img src='".concat(this,"' ").concat(t,"/>")},function(n){n.symbols=Symbols}(It||(It={})),function(n){function r(){return++t}function u(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}var t,i;n.clipboard={getData:function(){return window.clipboardData.getData("Text")},setData:function(n){return window.clipboardData.setData("Text",n)},clearData:function(){return window.clipboardData.clearData()}};t=(new Date).valueOf();n.uid=r;i=function(){function n(){this._handlers=[]}return n.prototype.on=function(n){n&&this._handlers.push(n)},n.prototype.clear=function(){this._handlers.clear()},n.prototype.call=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._handlers.forEach(function(n){return n.apply(void 0,t)})},n}();n.Event=i;n.isMobile=u;n.mobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod|Safary/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return n.mobile.Android()||n.mobile.BlackBerry()||n.mobile.iOS()||n.mobile.Opera()||n.mobile.Windows()}}}(It||(It={})),function(n){var t;(function(n){var t;(function(n){function i(n){var t=new RegExp("(?:^|; )"+encodeURIComponent(n)+"=([^;]*)").exec(document.cookie);return t?t[1]:null}function t(n,t,i){var r,u;i===void 0&&(i=7300);r=new Date;r.setTime(r.getTime()+i*864e5);u="; expires="+r.toUTCString();document.cookie=n+"="+t+u+"; path=/"}function r(n){t(n,"",-1)}n.read=i;n.write=t;n.remove=r})(t=n.cookies||(n.cookies={}))})(t=n.storage||(n.storage={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){function i(n){var i;return t?(i=t.getItem(n),!i)?undefined:JSON.parse(i):undefined}function r(n){t&&t.removeItem(n)}function u(n,i){if(t){var r=JSON.stringify(i);t.setItem(n,r)}}var t=window.localStorage;n.get=i;n.remove=r;n.put=u})(t=n.local||(n.local={}))})(t=n.storage||(n.storage={}))}(It||(It={})),function(n){var t;(function(n){var t=function(){function n(){this.data=null}return n.prototype.expand=function(n,t){var r=[],u,i;for(u in n)i=this.lookup[n[u]],t&&(i=t(i)),r.push(i);return r},n.prototype.loadTree=function(n,t,i,r){var u=this;return u.list=n,u.idAttr=t||"id",u.parentAttr=i||"parent",u.childrenAttr=r||"children",u.data=[],u.lookup={},n.forEach(function(n){var t=n[u.idAttr];u.lookup[t]=n}),n.forEach(function(n){var r=n[u.parentAttr],i,t;r!==undefined&&r?(i=u.lookup[r],i?(t=i[u.childrenAttr],t||(t=[],i[u.childrenAttr]=t),t.push(n)):u.data.push(n)):u.data.push(n)}),u.data},n}();n.TreeService=t})(t=n.Web||(n.Web={}))}(It||(It={}));XMLHttpRequest.prototype.json=function(n,t){var i;return(n===void 0&&(n=!0),t===void 0&&(t=!0),i=this,t&&It.Web.error(i))?undefined:i.responseText?n?JSON.parse(i.responseText,jsonDateParse):JSON.parse(i.responseText):undefined};XMLHttpRequest.prototype.list=function(n){var t;return(n===void 0&&(n=!0),t=this,!t.responseText)?undefined:t.json(n)};XMLHttpRequest.prototype.tree=function(n,t,i){var r,u;return(n===void 0&&(n="id"),t===void 0&&(t="parentId"),i===void 0&&(i="data"),r=this,!r.responseText)?undefined:(u=r.json(),It.Web.list2tree(u,n,t,i))};XMLHttpRequest.prototype.text=function(){var n=this;return It.Web.error(n)?undefined:n.responseText},function(n){var t;(function(t){function h(t,i,r,u){i===void 0&&(i="id");r===void 0&&(r="parentId");u===void 0&&(u="data");var f=new n.Web.TreeService,e=f.loadTree(t,i,r,u);return e.service=f,e}function c(t,r){r||(r={});r._v=n.uid();var f=u(r,!0);return t.indexOf("?")<0&&(t+="?"),t+=f,i(t,"GET")}function l(n){return i(n,"GET",undefined,undefined,!1,!1)}function a(n,t,r){return t===void 0&&(t=null),i(n,"POST",t,r)}function v(n,t){return t===void 0&&(t=null),i(n,"PUT",t)}function y(n,t){return t===void 0&&(t=null),i(n,"DELETE",t)}function i(i,r,u,e,o,s){var h,c,v,a;r===void 0&&(r="GET");e===void 0&&(e=!1);o===void 0&&(o=!0);s===void 0&&(s=!0);h=new XMLHttpRequest;h.open(r,i,!1);c=t.auth.tokens.current;o&&c&&h.setRequestHeader("Authorization","Bearer "+c);r!="GET"&&u&&(e?(u=JSON.stringify(u),h.setRequestHeader("Content-type","application/json; charset=utf-8")):u instanceof File?v=123:u=f(u));try{h.send(u)}catch(l){s&&(a=l.name+"<br /><br />"+l.message,n.UI.error(a));throw new Error("load error: "+JSON.stringify(l));}return h}function f(n,t,i){var u=i||new FormData,o,e,r;for(e in n)n.hasOwnProperty(e)&&(o=t?t+"["+e+"]":e,r=n[e],isValidDate(r)?(r.toJSON||(r=new Date(r.replace(" ","T"))),r.toJSON&&(r=r.toLocaleJSON(r)),u.append(o,r)):r instanceof File||r instanceof FileList?u.append(o,r):typeof r!="object"||r instanceof File||r instanceof FileList?u.append(o,r):(f(r,e,u),u.append(o,r)));return u}function e(n,t,i){if(i===void 0&&(i=!1),!n){location.hash="/";location.reload();return}n=n||location.pathname;var r=i?"_blank":"_self";t&&(delete t.module,delete t.view,n+=u(t));open(n,r)}function o(n){var r={},u=n.indexOf("?")+1,i,t;if(u>0)for(i=n.substr(u).split("&"),t=0;t<i.length;t++){var f=i[t].split("="),e=decodeURIComponent(f[0].trim()),o=decodeURIComponent(f[1]||"");r[e]=o}return r}function p(n){var t,i;if(!n)return"";t="";for(i in n)t+=" "+i+"='"+n[i]+"'";return t}function w(n){var t,i;if(!n)return"";t="";for(i in n)t+="".concat(i,":").concat(n[i],";");return t}function u(n,t){var r,u,i;if(t===void 0&&(t=!0),!n)return"";if(typeof n=="string")return n;r="";for(u in n)(i=n[u],i)&&(isValidDate(i)&&(i=i.toLocaleJSON()),r+=t?encodeURI(u)+"="+encodeURI(i)+"&":u+"="+i+"&");return r.substring(0,r.length-1)}function s(n){n===void 0&&(n=!1);window.history.back();n&&setTimeout(function(){return location.reload()},300)}function b(){var n=o(location.search);n&&n.returnUrl?e(n.returnUrl||"./"):s(!0)}function k(t,i){var u,f,e;if(i===void 0&&(i=!0),t.status==200)return!1;if(t&&console.log(t.responseText),u=r.UnknownError,f=r.Error+" "+t.status+": "+t.statusText,t.status==401)return e=r.AccessError+" ("+t.responseText+")",i?n.UI.error(e,r.ErrorText):console.error("response error",t.responseURL,e),!0;t.status==500?u=r.ErrorText:t.status==404?u=r.ResNotFound:t&&(f="",u=t.responseText||u);u=u.replace(/(?:\\[rn]|[\r\n]+)+/g," ");i?n.UI.error(u,f):console.error("response error",t.responseURL+" "+f,u);throw new Error(u);}t.list2tree=h;t.get=c;t.get0=l;t.post=a;t.put=v;t.del=y;t.request=i;t.openUrl=e;t.parseUrlQuery=o;t.args2attr=p;t.args2style=w;t.getUrlQuery=u;t.historyBack=s;t.goReturnUrl=b;var r=n.UI.coreLocale.Err;t.error=k})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t;(function(t){function u(n,t){if(i[n])return t&&t(""),null;i[n]=!0;var r=document.createElement("script");r.src=n;r.onload=t;document.head.appendChild(r)}function f(n){var u,r;if(i[n]||(i[n]=!0,u=t.get(n),t.error(u,!1)))return null;r=document.createElement("script");r.language="javascript";r.type="text/javascript";r.text=u.responseText;document.head.appendChild(r)}function e(n){if(i[n])return null;i[n]=!0;var t=document.createElement("link");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("href",n);document.head.appendChild(t)}function o(t,u){var h,e,s,o,f;if(i[t])return null;for(h=r(t),console.log("loading link:",t),e=u?document.getElementById(u):document.createElement("div"),u||document.body.appendChild(e),e.innerHTML=h,s=e.getElementsByTagName("script"),o=0;o<s.length;++o)if(f=s[o],f.src&&n.Web.loadJS(f.src),f.innerHTML)try{eval(f.innerHTML)}catch(c){console.error("script error: ",c,f.innerHTML)}}function r(n){var r=i[n],u;return r?r:(u=t.get(n),t.error(u,!1))?null:(r=u.responseText,i[n]=r,r)}function s(n,t,i){var r=document.createElement("a"),f,u;return i=i||"application/octet-stream",f=navigator.msSaveBlob,f?f(new Blob([n],{type:i}),t):"download"in r?(r.href="data:".concat(i,",").concat(encodeURIComponent(n)),r.setAttribute("download",t),document.body.appendChild(r),setTimeout(function(){r.click();document.body.removeChild(r)},66),!0):(u=document.createElement("iframe"),document.body.appendChild(u),u.src="data:".concat(i,",").concat(encodeURIComponent(n)),setTimeout(function(){document.body.removeChild(u)},333),!0)}var i={};t.loadJSAsync=u;t.loadJS=f;t.loadCSS=e;t.loadHtml=o;t.loadText=r;t.download=s})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t;(function(n){var i=(new Date).valueOf(),t=function(){function t(n,t){t===void 0&&(t="api/");this.controller=n;this.prefix=t}return t.prototype.url=function(i,r){r===void 0&&(r={});return"".concat(t.base,"/").concat(this.prefix).concat(this.controller,"/").concat(i,"/?")+n.getUrlQuery(r)},t.prototype.getUrl=function(n){return"".concat(t.base,"/").concat(this.prefix).concat(this.controller,"/get/").concat(n)},t.prototype.saveUrl=function(n){return n||(n=""),"".concat(t.base,"/").concat(this.prefix).concat(this.controller,"/save/").concat(n)},t.prototype.save=function(t){var i=t.id,r,u;return i?(r=this.saveUrl(i),n.put(r,t).json()):(u=this.saveUrl(),n.post(u,t).json())},t.prototype.delete=function(t){var i=this.saveUrl(t);return n.del(i).json()},t.prototype.load=function(t,i,r){r===void 0&&(r=!0);var u=n.get(this.url(t),i);return u.json(r)},t.prototype.loadList=function(t,i,r){r===void 0&&(r=!0);var u=n.get(this.url(t),i);return u.list(r)},t.prototype.loadTree=function(t,i,r,u,f){var e=n.get(this.url(t),u);return e.tree(i,r,f)},t.prototype.loadStr=function(t,i){var r=n.get(this.url(t),i);return r.text()},t.prototype.get=function(t){var i=n.get(this.getUrl(t));return i.json()},t.prototype.post=function(t,i,r){var u=n.post(this.url(t),i,r);return u.json()},t.prototype.put=function(t,i){var r=n.put(this.url(t),i);return r.json()},t.prototype.getSaveCfg=function(i){return i===void 0&&(i=!1),{url:"rest->".concat(t.base,"/").concat(this.prefix).concat(this.controller,"/save"),updateFromResponse:!0,autoupdate:i,on:{onAfterSaveError:function(t,i,r,u){return n.error(u.loader)}}}},t.base=".",t}();n.WebSource=t})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t;(function(t){var i=function(){function i(n,t){var i=this;this.baseUrl=n;this.controller=t;this.prefix="";this.listUrl=function(n){return i.url(n)}}return i.prototype.url=function(t){return"".concat(this.prefix).concat(this.baseUrl,"/").concat(this.controller)+n.Web.getUrlQuery(t,!1)},i.prototype.load=function(n,i){var u="".concat(this.baseUrl,"/").concat(this.controller).concat(n),r=t.get(u,i).json();return!r||!r.d?r:r.d.results},i.prototype.getUrl=function(n){return"".concat(this.baseUrl,"/").concat(this.controller,"(").concat(n,")")},i.prototype.saveUrl=function(n){return n?"".concat(this.baseUrl,"/").concat(this.controller,"(").concat(n,")"):"".concat(this.baseUrl,"/").concat(this.controller)},i.prototype.getSaveCfg=function(t){return t===void 0&&(t=!1),{url:"".concat(this.prefix).concat(this.baseUrl,"/").concat(this.controller),updateFromResponse:!0,autoupdate:t,on:{onAfterSaveError:function(t,i,r,u){return n.Web.error(u.loader)}}}},i}();t.UrlSource=i})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(t){var i=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.login=function(n){return this.post("login",n)},t.prototype.logout=function(){return this.post("logout")},t.prototype.registration=function(n){return this.post("registration",n)},t.prototype.check=function(){return this.load("check")},t}(n.WebSource);t.AuthSource=i;t.db=new i("auth")})(t=n.auth||(n.auth={}))})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t;(function(n){function t(i,r,u){function h(){setTimeout(function(){return t(i,r,u)},5e3);console.log("Пытаемся переконнектиться через 5 сек ")}var s=location.protocol==="https:"?"wss:":"ws:",f=n.WebSource.base,o,e;return f&&(f=f.split("//")[1]),f=f||window.location.host,o="".concat(s,"//").concat(f,"/").concat(i,"/").concat(r),e=new WebSocket(o),e.onopen=function(){console.log("Соединение установлено: "+new Date)},e.onclose=function(n){n.wasClean?console.log("Соединение закрыто чисто"+new Date):(console.log("Обрыв соединения"+new Date),h());console.log("Код: "+n.code+" причина: "+n.reason)},e.onmessage=function(n){var t=JSON.parse(n.data)||{},i=u[t.method||"onmessage"]||u,r;i&&(r=function(){return i(t)},r());console.log("Получены данные ",t)},e.onerror=function(n){console.log("Ошибка "+JSON.stringify(n))},e}n.bindSocket=t})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t;(function(t){var i;(function(t){var i;(function(i){function e(t){n.storage.local.put(r,t);i.current=t}function o(){var e=null;try{if(e=n.storage.local.get(r),!e)return u(),null}catch(o){return u(),null}return typeof webix!="undefined"&&webix.attachEvent("onBeforeAjax",function(n,t,i,r,u){u.Authorization=f+" "+e}),i.current=e,t.db.check(),e}function u(){n.storage.local.remove(r);i.current=undefined}var r="auth.token",f="Bearer";i.save=e;i.check=o;i.clear=u})(i=t.tokens||(t.tokens={}))})(i=t.auth||(t.auth={}))})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){function r(r){n.storage.local.put(i,r);t.last=r}var i="auth.login";t.last=n.storage.local.get(i);t.save=r})(i=t.logins||(t.logins={}))})(i=t.auth||(t.auth={}))})(t=n.Web||(n.Web={}))}(It||(It={})),function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.upload_crop=function(n,t,i,r){return i===void 0&&(i=0),r===void 0&&(r=!1),this.post("upload-crop",{file:n,folder:t,size:i,origin:r})},t.prototype.guids=function(n){return n===void 0&&(n=1),this.loadList("guids",{n:n})},t}(It.Web.WebSource);n.CoreDataSource=t;n.db=new t("core")}(app||(app={}));console.log("--------------- load CoreJS index v1.06");window.It=It;window.$u=It.UI,function(n){var t;(function(t){function r(n,i){return new t.Configs.ColumnConfig(n,i)}function u(n){var i=new t.Configs.ElementConfig(n);return n&&i.Attributes({name:n}),i}function f(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i(undefined,t)}function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i("toolbar",t)}function o(n,i,r,u,f,e){i===void 0&&(i="absolute");r===void 0&&(r=t.Configs.defaults.padding);var o=(new t.Configs.ContainerConfig).extend({align:i,body:n,css:"webix_form",left:r,top:u||r,bottom:f||u||r,right:e||r});return delete o.view,o}function s(t){for(var i,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return i=$u.panelbar($u.icon("arrow-circle-left","   ").Size(40).Click(function(){return n.Web.historyBack()})),t&&i.cols.push($u.label(t).Size(-1)),u&&(i.cols=i.cols.concat(u)),i}function h(n){var r,t,i;for(n===void 0&&(n=" "),r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=$u.panelbar(),n&&i.cols.push($u.label(n).Size(-1)),r&&(i.cols=i.cols.concat(r)),i}function c(n,i){i===void 0&&(i=!0);return new t.Configs.ItemConfig("label").extend({type:"icon",label:n,autowidth:i})}function l(n){return(new t.Configs.ContainerConfig).extend({view:n})}function a(){return new t.Configs.TabViewConfig}function v(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n[0]instanceof Array&&(n=n[0]),new t.Configs.TabsConfig(n).extend({})}function y(n){return new t.Configs.ItemConfig("button").extend({value:n,label:n,autowidth:!0})}function p(n,i){return(new t.Configs.ItemConfig).extend({view:"template2",template:n,borderless:!0,autoheight:!0,data:i})}function w(){return{template:" ",width:1}}function b(n,t){t===void 0&&(t="center");return $u.view("popup").extend({position:t,resize:!0,body:n})}function k(i,r){r=r||function(n){return t.alert(n)};return(new t.Configs.BaseConfig).extend({view:"uploader",id:webix.uid(),value:t.loc.Controls.PhotoDragDrop,upload:n.Web.WebSource.base+"/"+i,accept:"image/*",datatype:"json",on:{onFileUpload:r}})}function d(n){n===void 0&&(n=!1);var i=new t.Configs.ItemConfig("resizer");return n||(i.borderless=!0),i}function g(n){n===void 0&&(n=.0001);var i=new t.Configs.ItemConfig;return n&&(i.gravity=n),i}function nt(n,i){return i?new t.Configs.ItemConfig("button").Type("icon").extend({label:i,icon:n}):new t.Configs.ItemConfig("icon").extend({width:25,icon:n})}function tt(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return(new t.Configs.ContainerConfig).extend({cells:i.filterNotEmpty()})}function it(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return(new t.Configs.ContainerConfig).extend({cols:i.filterNotEmpty()})}function rt(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return(new t.Configs.ContainerConfig).extend({rows:i.filterNotEmpty()})}function i(n,i){return(new t.Configs.ContainerConfig).extend({view:n,paddingY:0,cols:i.filterNotEmpty()})}function ut(n){return{rows:[{maxHeight:100},{cols:[{},n,{}]},{maxHeight:100},]}}console.log("webix-core-lib: 2022-04-11 (1)");t.column=r;t.element=u;t.panelbar=f;t.toolbar=e;t.align=o;t.headbar=s;t.header=h;t.label=c;t.view=l;t.tabview=a;t.tabs=v;t.button=y;t.template=p;t.separator=w;t.popup=b;t.uploader=k;t.splitter=d;t.space=g;t.icon=nt;t.cells=tt;t.cols=it;t.rows=rt;t.colsview=i;t.viewCenter=ut})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){function i(n){webix.message({type:"error",text:n})}function r(n){webix.message({type:"error",text:n,expire:-1})}var t=webix;webix.Date.startOnMonday=!0;n.patterns2={phone:{mask:"+# (###) ###-##-##",allow:/[0-9]/g},card:{mask:"#### #### #### ####",allow:/[0-9]/g},date:{mask:"####-##-##",allow:/[0-9]/g},datetime:{mask:"####-##-## ##:##",allow:/[0-9]/g}};n.error=i;n.info=r;t.DataStore.prototype.findById=Array.prototype.findById;webix.protoUI({name:"htmllabel",setValue:function(n){this.setHTML(n)},getValue:function(){var n=this.getNode();return n?n.innerHTML:null}},t.ui.template);webix.protoUI({name:"valueform",setValue:function(n){this.config.setValue?this.config.setValue(n):this.ref&&this.ref.setValues(n)},getValue:function(){this.config.getValue?this.config.getValue():this.ref&&this.ref.getValues()}},t.ui.form);webix.protoUI({name:"edittree"},webix.EditAbility,t.ui.tree);webix.protoUI({name:"editlist"},webix.EditAbility,t.ui.list);webix.protoUI({$cssName:"text",name:"int",value_setter:function(n){return n||(n=0),n},setValue:function(n){n||(n=0);t.ui.text.prototype.setValue.call(this,n)}},t.ui.text);webix.protoUI({name:"activeList"},t.ui.list,webix.ActiveContent);webix.protoUI({name:"activeTable"},webix.ui.datatable,webix.ActiveContent);webix.protoUI({name:"activeDataView"},t.ui.dataview,webix.ActiveContent);webix.protoUI({name:"activeHtmlForm"},t.ui.htmlform,t.ui.template,webix.ActiveContent);webix.protoUI({name:"activeTemplate",getValue:function(){return this.getValues()},setValue:function(n){this.setValues(n)}},t.ui.template,webix.ActiveContent);webix.protoUI({name:"template2",getValue:function(){return this.getValues()},$getValue:function(){return this.getValues()},setValue:function(n){this.setValues(n)},$setValue:function(n){this.setValues(n)},$getSize:function(n,t){return this.data=this.data||{},webix.ui.template.prototype.$getSize.call(this,n,t)}},t.ui.template,webix.ActiveContent);webix.protoUI({name:"html",defaults:{template:"<div contenteditable='true' style='height: 100%; min-height: 100px; '><\/div>",borderless:!1,value:"HHHHHHHHHHHHHHHHH (webix-ext)"},getValue:function(){var n=this.$view.firstElementChild.firstElementChild;return n?n.innerHTML:""},onClear:function(){console.log("html clear");this.setValue("<div>GGGGGGGGGGGGGGGG (webix-ext)<\/div>")},setValue:function(n){var t=this.$view.firstElementChild.firstElementChild;t&&(t.innerHTML=n)}},t.ui.template);webix.protoUI({$cssName:"text",name:"number2",$init:function(){this.attachEvent("onItemClick",function(){this.$setValue(this.config.raw,!0)});this.attachEvent("onBlur",function(){this.$setValue(this.config.value)})},$render:function(){this.$setValue(this.config.value)},$setValue:function(n,t){this.config.raw=n;!t&&this.config.format&&(n=1*n,n||(n=0));this.getInputNode().value=n}},t.ui.text);webix.protoUI({name:"image",setValue:function(n){return this.setHTML("<img style='"+this.config.style+"' src='"+this.config.url+n+"'><\/img>"),webix.ui.label.prototype.setValue.apply(this,arguments)}},webix.ui.label);t.ui.datafilter.avgColumn=t.extend({refresh:function(n,t,i){var r=0;n.mapCells(null,i.columnId,null,1,function(n){return n=n*1,isNaN(n)||(r+=n),n});t.firstChild.innerHTML=Math.round(r/n.count())}},t.ui.datafilter.summColumn);t.ui.datafilter.countColumn=t.extend({refresh:function(n,t,i){var r=0;n.mapCells(null,i.columnId,null,1,function(n){return n=n*1,isNaN(n)||(r+=1),n});t.firstChild.innerHTML=Math.round(r)}},t.ui.datafilter.summColumn);t.proxy.idata={$proxy:!0,load:function(n,i){var r=this.source;r+=r.indexOf("?")==-1?"?":"&";var u=arguments[2],e=u?u.count:n.config.datafetch||0,f=u?u.start:0;r+="count="+e;r+=f?"&start="+f:"";i.push({success:this._checkLoadNext});t.ajax(r,i,n);n.$ready.push(this._attachHandlers)},_attachHandlers:function(){var n=this.config.url;this.config.columns?this.attachEvent("onScrollY",webix.bind(n._loadNext,this)):this.attachEvent("onAfterScroll",webix.bind(n._loadNext,this))},_checkLoadNext:function(n,t){var i=t.json();i.length||(this.data.url._dontLoadNext=!0)},_loadNext:function(){var t=this.config.url,i=this.getScrollState().y+this.$view.clientHeight,r=this.getLastId(),n=this.getItemNode(r);n&&i>n.offsetTop&&!t._dontLoadNext&&this.loadNext(this.config.datafetch,this.count()+1)}};t.proxy.odata={$proxy:!0,load:function(n,i,r){var f=this.source,o,s,e,u;if(f+="?$format=json",r&&(o=r.from,s=r.count,r.sort&&(f+="&$orderby="+r.sort.id+" "+r.sort.dir),r.filter)){e=[];for(u in r.filter)r.filter[u]&&e.push("startswith("+u+",'"+(r.filter[u]?r.filter[u]:"")+"')");e.length&&(f+="&$filter="+e.join(" and "))}t.ajax(f).then(function(r){r=r.json();var u=r;t.ajax.$callback(n,i,"",u,-1)})},save:function(n,t,i,r){var o=this.source,f=t.operation,u=t.data,e=o.replace(/\/$/,"")+"("+u.id+")";f=="insert"&&delete u.id;u=JSON.stringify(u);f=="insert"?webix.ajax().headers({"Content-type":"application/json"}).post(o,u,r):e&&(f=="update"?webix.ajax().headers({"Content-type":"application/json"}).put(e,u,r):f=="delete"&&webix.ajax().headers({"Content-type":"application/json"}).del(e,u,r))}};webix.protoUI({name:"slidebutton",defaults:{template:function(n,t){var i=n.name||"x"+webix.uid(),r="";n.labelRight&&(r="<label class='webix_label_right'>"+n.labelRight+"<\/label>",n.labelWidth&&(n.label=n.label||"&nbsp;"));var u=n.checkValue==n.value,f="webix_inp_checkbox_border webix_el_group webix_checkbox_"+(u?"1":"0"),e='<div class="cmn-toggle-box"><input  id="cmn-toggle-'+i+'" class="cmn-toggle cmn-toggle-round" type="checkbox" '+(u?"checked":"")+'><label  for="cmn-toggle-'+i+'"><\/label> <\/div>',o="<div style='line-height:"+t.config.cheight+"px' class='"+f+"'>"+e+r+"<\/div>";return t.$renderInput(n,o,i)}},on_click:{"cmn-toggle":function(){this.toggle()}}},t.ui.checkbox)})(t=n.w||(n.w={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=0,i=function(){function n(){}return n.prototype.checkOn=function(){return this.on||(this.on={}),this.on},n.prototype.checkType=function(){return this.type||(this.type={}),this.type},n.prototype.On=function(n,t){return this.checkOn(),this.on[n]=t,this},n.prototype.extend=function(n){return n&&webix.extend(this,n,!0),this},n.prototype.Type=function(n,t){return t===void 0&&(t=!0),t&&(this.type=n),this},n.prototype.View=function(n){return n&&(this.view=n),this},n.prototype.Id=function(n){return n&&(this.id=n),this},n.prototype.Disable=function(n){return n===void 0&&(n=!0),this.disabled=n,this},n.prototype.Ref=function(n){return this.id=n.id,this},n.prototype.Tooltip=function(n){return this.tooltip=n,this},n.prototype.Attributes=function(n){return this.attributes?webix.extend(this.attributes,n,!0):this.attributes=n,this},n.prototype.Scrollable=function(){return this.scroll="auto",this},n.prototype.Size=function(n,t){return n?n>0?this.width=n:n<0&&(this.gravity=-n,this.autowidth=!1):(delete this.width,this.autowidth=!0,this.autoheight=!0),t&&(this.height=t,delete this.autoheight),this},n.prototype.Autoheight=function(n){return n===void 0&&(n=!0),n?this.autoheight=n:delete this.autoheight,this},n.prototype.AutoResize=function(){var n=this;return n.id||(n.id="w_".concat(++t,"_").concat(webix.uid())),window.addEventListener("resize",function(){var t=$$(n.id);t&&t.isVisible()&&t.resize()}),this},n.prototype.Min=function(n,t){return this.minWidth=n,t&&(this.minHeight=t),this},n.prototype.Max=function(n,t){return this.maxWidth=n,t&&(this.maxHeight=t),this},n.prototype.Padding=function(n,t){return n&&!t?this.padding=n:(n&&(this.paddingX=n),t&&(this.paddingY=t)),this},n.prototype.Margin=function(n){return this.margin=n,this["margin-left"]=n+1,this["margin-top"]=n-1,this},n.prototype.Visible=function(n){return this.hidden=!n,this},n.prototype.Css=function(n,t){return t===void 0&&(t=!1),this.css&&t?this.css+=" "+n:this.css=n,this},n}();n.BaseConfig=i})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Cols=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=i.filterNotEmpty();this.cols=this.cols?this.cols.concat(t):t},t.prototype.Rows=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=i.filterNotEmpty();this.rows=this.rows?this.rows.concat(t):t},t.prototype.Responsive=function(n){return this.responsive=n,this},t.prototype.KeepResponsive=function(n){return n===void 0&&(n=!0),this.responsiveCell=!n,this},t.prototype.Flex=function(n){return n===void 0&&(n=!0),n&&(this.view="flexlayout"),this},t}(n.BaseConfig);n.ContainerConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){var i;(function(t){var i=function(t){function i(n){var i=t.call(this)||this;return i.table=n,i.lastId=0,i}return __extends(i,t),i.prototype.Editable=function(n,t){if(t===void 0&&(t=!0),t){var i=this;return i.editable=!0,i.editaction="dblclick",n&&(i.save=n),this.checkOn(),i.on.onItemClick=function(n){var t=n.row;i.lastId&&i.lastId==t?i.table.ref.edit(n):i.lastId=t},this}},i.prototype.Columns=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=i.filterNotEmpty();this.columns=this.columns?this.columns.concat(t):t},i.prototype.Unselectable=function(){var n=this;return n.select=!1,n.multiselect=!1,this},i.prototype.OnSelect=function(n){return this.On("onAfterSelect",n)},i.prototype.OnSelectChange=function(n){return this.On("onSelectChange",n)},i.prototype.OnItemSelect=function(n){var t=this;return this.On("onSelectChange",function(i){var r=t.table.getItem(i);n(r)})},i.prototype.OnItemClick=function(n){return this.On("onItemClick",n)},i.prototype.OnAdd=function(n){return this.On("onBeforeAdd",function(t,i){n(i)})},i.prototype.Tooltip=function(n){return this.tooltip=!n||{template:n},this},i.prototype.onLoadError=function(t,i,r,u,f){f&&f.text&&(t=f.text);n.Web.error(r)},i}(t.ContainerConfig);t.TableConfig=i})(i=t.Configs||(t.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(){function n(){this.sort="string";this.editor="text";this.filter="textFilter"}return n}(),i=function(i){function r(n,r){var u=i.call(this)||this;return u.id=n,u.map=r,u._settings=new t,u.tooltip=!1,u}return __extends(r,i),r.prototype.AsInt=function(){return this._settings.sort="int",this._settings.filter="numberFilter",this.format=webix.i18n.intFormat,this.css={"text-align":"right"},this.width||(this.width=75),this},r.prototype.AsNumber=function(n){return n===void 0&&(n="1'111.11"),this._settings.sort="int",this._settings.filter="numberFilter",this.numberFormat=n,this.format=webix.i18n.numberFormat,this.css={"text-align":"right"},this.width||(this.width=75),this},r.prototype.AsDate=function(n){return n===void 0&&(n=webix.Date.dateToStr("%d-%m-%Y",!1)),this._settings.editor="date",this._settings.sort="date",this._settings.filter="dateFilter",this.format=n,this.width||(this.width=100),this},r.prototype.AsCheckbox=function(n){n===void 0&&(n=!1);this._settings.sort="int";this._settings.editor="checkbox";var t=this;return t.checkValue=!0,t.uncheckValue=!1,t.template="{common.checkbox()}",n&&(t.threeState=n),this.width||(this.width=35),this},r.prototype.AsCheckboxReadly=function(t){if(t===void 0&&(t=!0),!t)return this.AsCheckbox();this._settings.sort="int";var i=this;return i.checkValue=!0,i.uncheckValue=!1,i.template=n.custom_checkbox,this.width||(this.width=35),this},r.prototype.AsRadio=function(){return this.template="{common.radio()}",this.width||(this.width=35),this},r.prototype.AsOrderMarker=function(n){return n===void 0&&(n="↕"),this.template="<div class='webix_drag_handle'>"+n+"<\/div>",this.width||(this.width=25),this.header||(this.header="≡"),this},r.prototype.AsColor=function(){return this._settings.editor="color",this.template=function(n,t,i){return"<span style='background-color:"+i+"; border-radius:4px; padding-right:10px;'>&nbsp&nbsp<\/span> "+i},this},r.prototype.AsSelect=function(n,t){return t===void 0&&(t="combo"),this.options=n,this._settings.editor=t,this._settings.filter="selectFilter",this.popupWidth=800,this},r.prototype.AsSuggest=function(n,t){return t===void 0&&(t="text"),this.suggest=n,this._settings.editor=t,this._settings.filter="selectFilter",this.popupWidth=800,this},r.prototype.AsMultiSelect=function(n,t){t===void 0&&(t="multiselect");this.options=n;var i=this;return i.suggest={view:"multisuggest",buttonText:"Select items"},this},r.prototype.Header=function(n,t){return t===void 0&&(t=undefined),this.header=n,t>0&&(this.width=t),t<0&&(this.fillspace=-t),this},r.prototype.Template=function(n){return this.template=n,this},r.prototype.Expression=function(n){return this.template=n,this},r.prototype.Tooltip=function(n){return this.tooltip=n,this},r.prototype.Format=function(n){return this.format=n,this},r.prototype.Pattern=function(n){return this.numberFormat=n,this},r.prototype.Sort=function(){return this.sort=this._settings.sort,this},r.prototype.Edit=function(n){return n===void 0&&(n=undefined),this.editor=n||this._settings.editor,this},r.prototype.Filter=function(){return this.header=[this.header,{content:this._settings.filter}],this},r.prototype.Footer=function(n){return n===void 0&&(n={content:"summColumn"}),this.footer=n,this},r.prototype.Error=function(n){return this.invalidMessage=n,this},r}(n.BaseConfig);n.ColumnConfig=i;webix.ui.datafilter.countColumn=webix.extend({refresh:function(n,t,i){var r=0;n.mapCells(null,i.columnId,null,1,function(n){return r++,n});t.firstChild.innerHTML=r}},webix.ui.datafilter.summColumn)})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this,i)||this,u;return r.list=i,u={view:"activeDataView",id:i.id,select:"row",multiselect:!0,scroll:!0,borderless:!0,navigation:!0,type:{href:n.HREF_PREFIX}},webix.extend(r,u,!0),r}return __extends(i,t),i.prototype.Template=function(n){return this.template=n,this},i.prototype.ItemSize=function(n,t){return n===void 0&&(n="auto"),t===void 0&&(t="auto"),this.checkType(),this.type.width=n,this.type.height=t,this},i}(n.TableConfig);n.DataViewConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){var i;(function(i){var r=webix.env.mobile||n.isMobile(),u=function(n){function u(t){var i=n.call(this)||this;return i.name=t,i.view="text",i}return __extends(u,n),u.prototype.Label=function(n,t,i){return this.label=n,i&&(this.labelWidth=i),r&&(t="top"),t&&(this.labelPosition=t),this},u.prototype.LabelR=function(n){return this.labelRight=n,this},u.prototype.Format=function(n,t){return t===void 0&&(t=!0),t&&(this.pattern=n),this},u.prototype.Readonly=function(n){return n===void 0&&(n=!0),this.readonly=n,this},u.prototype.On=function(n,t){return this.on||(this.on={}),this.on[n]=t,this},u.prototype.OnChange=function(n){return this.On("onChange",n)},u.prototype.Validate=function(n,i){return this.validate=n,i||(i=t.coreLocale.Err.ValidationError),this.invalidMessage=i,this},u.prototype.Require=function(n,i){return n===void 0&&(n=t.coreLocale.Err.ValidationRequire),i===void 0&&(i=!0),this.required=i,this.invalidMessage=n,this},u.prototype.RangeDates=function(n,t){var i={type:"calendar",body:{minDate:n,maxDate:t}};return this.extend({suggest:i}),this},u.prototype.Error=function(n){return this.invalidMessage=n,this},u.prototype.Value=function(n){return this.value=n,this},u.prototype.MaxLength=function(n){return this.Attributes({maxlength:n}),this},u.prototype.Tooltip=function(t){return n.prototype.Tooltip.call(this,t),!this.placeholder&&i.defaults.placeholders&&(this.placeholder=t),this},u.prototype.Placeholder=function(n){return this.placeholder=n,this},u.prototype.BottomLabel=function(n){return this.bottomLabel=n||this.tooltip,this},u.prototype.AsLabel=function(){return this.view="label",this},u.prototype.AsTemplate=function(n,t){return t===void 0&&(t=!0),this.view="template2",this.template=n,this.autoheight=t,this.borderless=!0,this},u.prototype.AsHtmlLabel=function(n){n===void 0&&(n=0);this.view="htmllabel";this.scroll=!1;this.borderless=!0;var t=this;return n?this.height=n:t.autoheight=!0,this},u.prototype.AsText=function(){return this.view="text",this.value="",this.autocomplete("off"),this},u.prototype.AsImage=function(n,t){return this.view="image",n&&(this.url=n),t&&(this.style=t),this},u.prototype.AsNumber=function(n){return n===void 0&&(n="1'111.00"),this.AsInt(n)},u.prototype.AsInt=function(n){return n===void 0&&(n="1'111"),r?this.type="number":(i.defaults.input_numtype&&(this.type=i.defaults.input_numtype),this.view="text",this.format=n),this.value=0,this.validate=webix.rules.isNumber,this.inputAlign="right",this.autocomplete("off"),this},u.prototype.AsCounter=function(n,t){return n===void 0&&(n=0),t===void 0&&(t=0),r?this.type="number":this.view="counter",this.value=0,this.validate=webix.rules.isNumber,this.width||(this.width=300),n&&(this.min=n),t&&(this.max=t),this.autocomplete("off"),this},u.prototype.AsSearch=function(n,t){this.view="search";this.type="search";var r=this;return t&&(r.placeholder=t),n&&(r.keyPressTimeout=i.defaults.keyDelay,r.on={onSearchIconClick:n,onKeyPress:function(t){if(t==13)return n(),!1}}),this},u.prototype.AsTextArea=function(n,t){return n===void 0&&(n=100),t===void 0&&(t="top"),this.view="textarea",n&&(this.height=n),this.labelPosition=r?"top":t,this.autocomplete("off"),this},u.prototype.AsHtmlEditor=function(n,t){return n===void 0&&(n=0),t===void 0&&(t="top"),this.view="html",n&&(this.height=n),this.labelPosition=t,this},u.prototype.AsHtml=function(){return this.view="html-editor",this.value="",this},u.prototype.AsCodeEditor=function(n,t,i){n===void 0&&(n="javascript");t===void 0&&(t=100);i===void 0&&(i="top");this.view="ace-editor";t&&(this.height=t);this.labelPosition=i;var r=this;return r.theme="textmate",r.mode=n,this},u.prototype.AsDate=function(n){return n===void 0&&(n=!1),this.view="datepicker",this.editable=i.defaults.dateedit,this.timepicker=n,this.type=n?"datetime-local":"date",this.autocomplete("off"),this},u.prototype.AsTime=function(){this.view="datepicker";this.type="time";this.editable=i.defaults.dateedit;
//!mob;
return this.stringResult=!0,this.autocomplete("off"),this},u.prototype.AsMonth=function(){return this.view="datepicker",this.type="month",this.editable=i.defaults.dateedit&&!r,this.autocomplete("off"),this},u.prototype.AsYear=function(){return this.view="datepicker",this.type="year",this.editable=i.defaults.dateedit&&!r,this.autocomplete("off"),this},u.prototype.AsColor=function(){return this.view="colorpicker",this.type="color",this.editable=!r,this},u.prototype.AsCheckbox=function(n){n===void 0&&(n=!1);this.view="checkbox";var t=this;return r&&(this.labelPosition=undefined),n&&(this.labelRight=this.label,delete t.label),t.uncheckValue=!1,t.checkValue=!0,this},u.prototype.AsSwitch=function(n,t){this.view="switch";var i=this;return r&&(this.labelPosition=undefined),n&&(i.onLabel=n),t&&(i.offLabel=t),i.uncheckValue=!1,i.checkValue=!0,this},u.prototype.AsPassword=function(){return this.type="password",this},u.prototype.AsEmail=function(){return this.type="email",this.Validate(webix.rules.isEmail),this},u.prototype.AsUrl=function(){return this.type="Url",this},u.prototype.AsTelephone=function(n){return n===void 0&&(n=$u.w.patterns2.phone),this.type=r?"tel":"text",this.pattern=n,this},u.prototype.AsRadio=function(n){return this.view="radio",this.options=n,this.vertical=r,this.customRadio=!1,this.autocomplete("off"),this},u.prototype.autocomplete=function(n){this.Attributes({autocomplete:n})},u.prototype.AsSelect=function(n,t){return t===void 0&&(t=r?"select":i.defaults.select),this.view=t,this.options=n,this.yCount=20,this.keyPressTimeout=i.defaults.keyDelay,this.autocomplete("off"),this},u.prototype.AsSelect2=function(n,t,u,f){t===void 0&&(t="");u===void 0&&(u="");f===void 0&&(f=!1);this.view=r?"select":"combo";var e=this;return this.autocomplete("off"),e.fitMaster=!1,e.options={view:"suggest",keyPressTimeout:i.defaults.keyDelay,fitMaster:!1,width:1400,body:{yCount:20,fitMaster:!1,width:i.defaults.dropwidth}},t&&(e.options.body.template=t),u&&(e.options.filter=function(n,t){var i=n[u];return!i||!t?!1:i.toString().toLowerCase().indexOf(t.toLowerCase())===0?!0:!1}),typeof n=="string"?f?e.options.body.dataFeed=n:e.options.body.url=n:e.options.body.data=n,this},u.prototype.AsMultiSelect=function(n,t,u,f){if(t===void 0&&(t=!1),u===void 0&&(u=i.defaults.multiselect),r)return this.AsSelect(n,"select").Attributes({multiple:!0});this.view=u;var e=this;return this.autocomplete("off"),e.fitMaster=!1,e.suggest={keyPressTimeout:i.defaults.keyDelay,fitMaster:!1,width:1400,body:{yCount:20,fitMaster:!1,width:i.defaults.dropwidth}},f&&(e.suggest.body.template=f),typeof n=="string"?t?e.suggest.body.dataFeed=n:e.suggest.body.url=n:e.suggest.body.data=n,this},u}(i.BaseConfig);i.ElementConfig=u})(i=t.Configs||(t.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this)||this,u;return r.__container=i,u={view:"form",id:r.__container.id,borderless:!0,autoheight:!0,padding:n.defaults.padding,elementsConfig:{labelWidth:n.defaults.labelWidth},type:{href:n.HREF_PREFIX}},r.extend(u),r}return __extends(i,t),i.prototype.Labels=function(n,t){return this.elementsConfig||(this.elementsConfig={}),n&&(this.elementsConfig.labelWidth=n),t&&(this.elementsConfig.labelPosition=t),this},i.prototype.Readonly=function(n){return this.elementsConfig||(this.elementsConfig={}),this.elementsConfig.readonly=n,this},i.prototype.Elements=function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t=i.filterNotEmpty();this.elements=this.elements?this.elements.concat(t):t},i}(n.ContainerConfig);n.FormConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(t){var i=function(i){function r(r){var u=i.call(this,r)||this,f,e;return u.grid=r,f=u,e={view:"datatable",id:r.id,select:"row",multiselect:!0,resizeColumn:!0,datafetch:10,loadahead:20,scrollX:!1,scrollY:!0,borderless:!0,navigation:!0,minHeight:100,type:{href:t.HREF_PREFIX},on:{onLoadError:function(n,t,i,r,f){return u.onLoadError(n,t,i,r,f)},onValidationError:function(t,i,r){var u=f.columns[0],e=n.coreLocale.Err.ValidationError,h=function(n){return u=f.columns.find(function(t){return t.id==n}),"break"},o,s;for(o in r)if(s=h(o),s==="break")break;u&&u.invalidMessage&&(e=u.invalidMessage);$u.w.error(e)}}},webix.extend(u,e,!0),u}return __extends(r,i),r.prototype.OnCheck=function(n){return this.On("onCheck",n)},r.prototype.OnEdit=function(n){return this.On("onAfterEditStop",n)},r.prototype.DragOrder=function(n,t){return t===void 0&&(t=!1),this.checkOn(),this.drag||(this.drag=!0),t&&(this.on.onBeforeDrag=function(n,t){return(t.target||t.srcElement).className=="webix_drag_handle"}),this.on.onAfterDrop=function(){n(0,this.data.order)},this},r.prototype.Subrow=function(n,t){return t===void 0&&(t="auto"),this.subrow=n,t&&(this.subRowHeight=t),this},r.prototype.Footer=function(){return this.footer=!0,this},r}(t.TableConfig);t.GridConfig=i})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(n){var i=t.call(this)||this;return n&&(i.view=n),i}return __extends(i,t),i.prototype.Click=function(n){return this.click=n,this},i.prototype.Align=function(n){return this.align=n,this},i.prototype.Hidden=function(n){return this.hidden=n,this},i.prototype.Hotkey=function(n){return this.hotkey=n,this},i.prototype.Batch=function(n){return this.batch=n,this},i.prototype.Popup=function(t,i){return this.popup=new n.PopupConfig(t),i&&this.popup.OnPopup(function(){return i()}),this},i.prototype.PopupCfg=function(n){return this.popup=n,this},i.prototype.OnChange=function(n){return this.checkOn(),this.on.onChange=n,this},i}(n.BaseConfig);n.ItemConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this,i)||this,u;return r.list=i,u={view:"activeList",id:i.id,select:!0,multiselect:!0,resizeColumn:!0,datafetch:10,loadahead:20,scrollX:!1,scrollY:!0,scroll:!1,borderless:!0,navigation:!0,type:{href:n.HREF_PREFIX}},webix.extend(r,u,!0),r}return __extends(i,t),i.prototype.DragDrop=function(n){var i=this,t=this;return t.drag=!0,this.orderName=n,t.on||(t.on={}),t.on.onAfterDrop=function(n){return i.onOrderDrop(n)},this},i.prototype.Editable=function(n){var t=this;return t.view="editlist",t.editable=!0,t.editaction="dblclick",n&&(t.save=n),this},i.prototype.onOrderDrop=function(n){var u=this,i=this.list.ref,t,r;if(n.from!==i)return!0;t=0;r=[];i.data.each(function(n){t++;n[u.orderName]!=t&&(r[u.orderName]=t,i.updateItem(n.id,r))});this.list.save()},i}(n.TableConfig);n.ListConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t,i){var r=n.call(this)||this,u;return r.config=t,r.head=i,u={view:"popup",head:i,body:t},r.extend(u),r}return __extends(t,n),t.prototype.OnPopup=function(n){var t=!0;return this.On("onBeforeShow",function(){t&&(t=!1,n())}),this},t}(n.BaseConfig);n.PopupConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t){var i=n.call(this,t)||this;return i.tree=t,i}return __extends(t,n),t.prototype.DragDrop=function(){var t=this,n=this;return this.checkOn(),n.drag=!0,n.on.onBeforeDrop=function(n){return t.onBeforeDrop(n)},n.on.onAfterDrop=function(n){return t.onAfterDrop(n)},this},t.prototype.onBeforeDrop=function(n){var r=this.tree.ref,t,i;if(n.from!==r)return!1;t=event;i=t.shiftKey||t.altKey||t.ctrlKey;i&&(n.parent=n.target,n.index=-1)},t.prototype.onAfterDrop=function(n){var t=this.tree.ref;if(n.from!==t)return!1;this.tree.reindex(n.parent,n.start)},t}(n.TableConfig);n.BaseTreeConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t){var i=n.call(this,"tabbar")||this;return i.multiview=!0,i.options=t,i}return __extends(t,n),t.prototype.Value=function(n){return this.value=n,this},t.prototype.TabWidth=function(n){return n===void 0&&(n="auto"),this.optionWidth=n,this},t}(n.ItemConfig);n.TabsConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(){var t=n.call(this,"tabview")||this;return t.cells=[],t.tabbar={optionWidth:"auto"},t}return __extends(t,n),t.prototype.Value=function(n){return this.value=n,this},t.prototype.Tab=function(n,t,i){return i||(i={}),i.header=" "+n+" ",i.body=t,this.cells.push(i),this},t}(n.ItemConfig);n.TabViewConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t){var i=n.call(this,t)||this,r={view:"tree",id:i.tree.id,select:!0,navigation:!0,borderless:!0,autoheight:!0,scroll:!1,multiselect:!0,minWidth:50,minHeight:50};return i.extend(r),i}return __extends(t,n),t.prototype.Editable=function(t){return n.prototype.Editable.call(this),this.view="edittree",this.editor="text",this.editValue=t,this},t.prototype.Template=function(n){return this.template=n,this},t}(n.BaseTreeConfig);n.TreeConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(t){function i(i){var r=t.call(this,i)||this,u={view:"treetable",id:r.tree.id,borderless:!0,select:"row",multiselect:!0,minWidth:50,minHeight:50,resizeColumn:!0,navigation:!0,scroll:!1,type:{href:n.HREF_PREFIX},on:{onLoadError:function(n,t,i,u,f){return r.onLoadError(n,t,i,u,f)}}};return r.extend(u),r}return __extends(i,t),i}(n.BaseTreeConfig);n.TreeTableConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){var t=function(n){function t(t){var i=n.call(this)||this,r={view:"multiview",id:t,keepViews:!0,cells:[{template:""},]};return i.extend(r),i}return __extends(t,n),t}(n.ContainerConfig);n.MultiViewConfig=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t;(function(n){function t(n,t,i){return i?"<div class='fa fa-chevron-down'><\/div>":"<div class='webix_table_checkbox notchecked'><\/div>"}n.HREF_PREFIX="#!";n.defaults={keyDelay:700,padding:20,labelWidth:120,placeholders:!1,dropwidth:600,toolbarIcon:!0,select:"combo",multiselect:"multicombo",dateedit:!0,input_numtype:""};n.custom_checkbox=t})(t=n.Configs||(n.Configs={}))})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(){function n(){this.id=webix.uid().toString();this._ref=null}return Object.defineProperty(n.prototype,"ref",{get:function(){return this._ref||(this._ref=$$(this.id)),this._ref},enumerable:!1,configurable:!0}),n.prototype.setAttrId=function(n){var t=this.ref.getNode();t.setAttribute("id",n)},n.prototype.set=function(n,t){(t===void 0&&(t=!0),this.ref.define(n),t)&&(this.ref.reconstruct?this.ref.reconstruct():this.ref.refresh&&this.ref.refresh())},n.prototype.bind=function(n,t){this.ref.bind(n.ref,t)},n.prototype.updateBindings=function(){var n=this.ref.save();return!0},n.prototype.visible=function(n){n?this.ref.show():this.ref.hide()},n.prototype.enable=function(n){n===void 0&&(n=!0);n?this.ref.enable():this.ref.disable()},n.prototype.getValue=function(){return this.ref.getValue()},n.prototype.setValue=function(n){return this.ref.setValue(n)},n.prototype.setValues=function(n){return this.ref.setValues(n)},n.prototype.getText=function(){return this.ref.getText()},n.prototype.toExcel=function(n){webix.toExcel(this.ref,n)},n.prototype.get=function(){return this.ref},n}();n.RefUI=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getChildViews=function(){return this.ref.getChildViews()},t.prototype.collapse=function(n){n===void 0&&(n=!0);n?this.ref.collapse():this.ref.expand()},t}(n.RefUI);n.RefContainer=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.load=function(t,i){var u=n.Web.get(t,i),r=u.json();return(r&&r.d&&r.d.results&&(r=r.d.results[0]),!r)?null:(this.ref.setValues(r),this.ref.setDirty&&this.ref.setDirty(!1),this.clearValidation(),r)},i.prototype.values=function(n){return n===void 0&&(n=!1),n?this.ref.getDirtyValues():this.ref.getValues()},i.prototype.setValuesEx=function(n){if(n){var t=this.values(!1);return t=webix.extend(t,n,!0),this.ref.setValues(t),t}},i.prototype.setValues=function(n){return this.ref.setValues(n||{}),n},i.prototype.clearValidation=function(){},i}(t.RefContainer);t.RefDataContainer=i})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){var i=function(i){function r(n){var t=i.call(this)||this;return t.dataSource=n,t}return __extends(r,i),Object.defineProperty(r.prototype,"elements",{get:function(){return this.ref?this.ref.elements:undefined},enumerable:!1,configurable:!0}),r.prototype.enable=function(n,t){var i=t?this.ref.elements[t]:this.ref;n?i.enable():i.disable()},r.prototype.visible=function(n,t){var i=t?this.ref.elements[t]:this.ref;n?i.show():i.hide()},r.prototype.clear=function(n){n===void 0&&(n={});this.ref.setValues(n);this.ref.setDirty&&this.ref.setDirty(!1);this.clearValidation()},r.prototype.setElement=function(n,t){typeof n=="string"&&(n=this.elements[n]);n.define(t);n.refresh()},r.prototype.save=function(t,i,r){var u=this.values(),f;if(u.collections&&delete u.collections,r&&webix.extend(u,r,!0),f=i?n.Web.post(t,u).json():n.Web.put(t,u).json(),!f)return null;if(webix.extend(u,f,!0),this.ref.setValues(u),this.onSave)this.onSave(u);return this.ref.setDirty(!1),u},r.prototype.isChanged=function(){return this.ref.isDirty()},r.prototype.clearChanges=function(){return this.ref.setDirty(!1)},r.prototype.validate=function(n){n===void 0&&(n=t.coreLocale.Err.ValidationError);var i=this.ref.validate();return i?this.clearValidation():$u.w.error(n),i},r.prototype.clearValidation=function(){this.ref.clearValidation&&this.ref.clearValidation()},r.prototype.config=function(){return new t.Configs.FormConfig(this)},r}(t.RefDataContainer);t.RefForm=i})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.asEditAbility=function(){return this.get()},i.prototype.asDataStore=function(){return this.get()},i.prototype.btnAdd_fn=function(t,i){var r=this;return n.Configs.defaults.toolbarIcon?n.icon("plus-circle").Click(function(){return r.add(t,i)}).Tooltip(n.loc.Tooltips.Add):n.button(n.loc.Controls.Add).Click(function(){return r.add(t,i)}).Tooltip(n.loc.Tooltips.Add)},i.prototype.btnAdd=function(t,i){var r=this;return n.Configs.defaults.toolbarIcon?n.icon("plus-circle").Click(function(){return r.add(t,i)}).Tooltip(n.loc.Tooltips.Add):n.button(n.loc.Controls.Add).Click(function(){return r.add(t,i)}).Tooltip(n.loc.Tooltips.Add)},i.prototype.btnDel=function(){var t=this;return n.Configs.defaults.toolbarIcon?n.icon("minus-circle").Click(function(){return t.delSelected()}).Tooltip(n.loc.Tooltips.Del):n.button(n.loc.Controls.Del).Click(function(){return t.delSelected()}).Tooltip(n.loc.Tooltips.Del)},i.prototype.btnSave=function(){var t=this;return n.Configs.defaults.toolbarIcon?n.icon("save").Click(function(){return t.save()}).Tooltip(n.loc.Tooltips.Save):n.button(n.loc.Controls.Save).Click(function(){return t.save()}).Tooltip(n.loc.Tooltips.Save)},i.prototype.btnRefresh=function(t){var r=this,i=t||function(){return r.refresh()};return n.Configs.defaults.toolbarIcon?n.icon("refresh").Click(i).Tooltip(n.loc.Tooltips.Refresh):n.button(n.loc.Controls.Refresh).Click(i).Tooltip(n.loc.Tooltips.Refresh)},i.prototype.textFilter=function(n,t){n===void 0&&(n="#value#");t===void 0&&(t="");var i=this;return $u.view("search").extend({placeholder:t,on:{onTimedKeyPress:function(){var t=this.getValue();i.filterByExpr(n,t)}}})},i.prototype.filterByFunc=function(n){this.ref.filter(n)},i.prototype.filterByExpr=function(n,t){this.ref.filter(n,t)},i.prototype.getItems=function(n){return n===void 0&&(n=null),this.ref.data.find(n)},i.prototype.data=function(){return webix.dp(this.id)},i.prototype.callNoEvents=function(n){var t=this.data();try{t.off();n()}catch(i){$u.w.error(i.message)}finally{t.on()}},i.prototype.delSelected=function(t){var f,r,u,i;if(t===void 0&&(t=!0),t&&!confirm(n.loc.Controls.DelAsk))return!1;if(f=this.ref,r=f.getSelectedId(!0),r){for(u=0;u<r.length;u++)i=r[u],i.row&&(i=i.row),f.remove(i);return!0}},i.prototype.getSelectedItem=function(){var n=this.ref.getSelectedItem();return n instanceof Array&&n.length&&(n=n[0]),n},i.prototype.getSelectedId=function(){return this.ref.getSelectedId(!1)},i.prototype.getSelectedItems=function(){return this.ref.getSelectedItem(!0)},i.prototype.getSelectedIds=function(){var n=this.ref.getSelectedId(!0);return n.map(function(n){return n.id||n})},i.prototype.getItem=function(n){return this.ref.getItem(n)},i.prototype.containsFilter=function(n){if(!this.ref._filter_elements)return null;return this.ref._filter_elements[n]},i.prototype.clearFilter=function(){var t=this,n=this.ref;n.eachColumn&&n.eachColumn(function(i){if(t.containsFilter(i)){var r=n.getFilter(i);r&&r.value&&(r.value="")}})},i.prototype.refresh=function(n){var t,i;n===void 0&&(n=undefined);t=this.ref;n&&(t.clearAll?t.clearAll():t.data&&t.data.clearAll&&t.data.clearAll());n instanceof Array?t.parse(n):typeof n=="string"?(i=t.config,i.url=n,t.load(i.url)):(i=this.ref.config,i.url&&t.load(i.url),this.ref.refresh());this.clearFilter()},i.prototype.forEach=function(n){var t=this.ref;t.eachRow(function(i){var r=t.getItem(i);n(r)})},i.prototype.reload=function(n,t){var i=this.ref,r=function(r){var f=n[r],e=f[t],u;if(!e||(u=i.find(function(n){return n[t]==e},!0),!u))return"continue";i.updateItem(u.id,f)};for(var u in n)r(u)},i.prototype.showItem=function(n){this.ref.showItem(n)},i.prototype.selectFirst=function(){var n=this.ref;this.select(n.getFirstId())},i.prototype.selectLast=function(){var n=this.ref;this.select(n.getLastId())},i.prototype.select=function(n){if(n){var t=this.ref;t.select(n,!1);this.showItem(n)}},i.prototype.clearSelection=function(){var n=this.ref;n.clearSelection?n.clearSelection():n.select&&n.unselect(0)},i.prototype.save=function(){var n=webix.dp(this.id);n.send()},i.prototype.cancel=function(){var n=webix.dp(this.id);n.reset()},i.prototype.add=function(n,t,i){var u=this,r;return n===void 0&&(n={}),r=this.ref.add(n,t,i),this.select(r),setTimeout(function(){return u.ref.refresh(r)},800),r},i.prototype.bindNew=function(){this.ref.setCursor(null)},i.prototype.updateCurrent=function(n){var t=this.getSelectedItem();return t?(this.ref.updateItem(t.id,n),t):null},i.prototype.updateRow=function(n,t){return this.ref.updateItem(n,t)},i.prototype.removeRow=function(n){this.removeRows([n])},i.prototype.removeRows=function(n){for(var i=this.ref,t=0;t<n.length;t++)i.remove(n[t])},i.prototype.scheme=function(n){this.ref.data.scheme(n)},i.prototype.attachOnSelect=function(n){var t=this;this.ref.attachEvent("onAfterSelect",function(i){var r=t.ref.getItem(i.id);n(r)})},i}(n.RefUI);n.RefTable=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.getItems=function(){var n=this.ref,t=n.getList();return t.config.data},t.prototype.getItem=function(n){if(n||(n=this.getValue()),!n)return null;var t=this.ref.getList();return t.getItem(n)},t.prototype.selectFirst=function(){var t=this.ref.getList(),n=t.getFirstId();n&&this.select(n)},t.prototype.select=function(n){this.ref.setValue(n)},t.prototype.skipSelection=function(n){var t=this.ref,r=t.getList(),u=r.config.data,e=t.getValue(),i=r.getIndexById(e),f;(i+=n,i<0||i>=u.length)||(f=u[i],t.setValue(f.id),t.refresh())},t}(n.RefUI);n.RefCombo=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.config=function(){return new n.Configs.ListConfig(this)},i}(n.RefTable);n.RefList=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.config=function(){return new n.Configs.DataViewConfig(this)},i}(n.RefTable);n.RefDataView=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.configCtxMenu=function(t){return n.view("contextmenu").Ref(this).extend({data:t,on:{onItemClick:function(n){var i=this.getContext(),u=i.obj,r=i.id,f=u.getItem(r),t=this.getItem(n);t&&t.click&&t.click(f||r,t)}}})},i.prototype.attachTo=function(n){this.ref.attachTo(n.ref)},i}(n.RefUI);n.RefMenu=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){var i=function(i){function r(){return i!==null&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.config=function(){return new t.Configs.GridConfig(this)},r.prototype.clearSelection=function(){this.ref.clearSelection()},r.prototype.adjustRowHeight=function(n){this.ref.adjustRowHeight(n)},r.prototype.importFromCSV=function(n){function u(){var r="Key\n\t".concat(n.key,"\ncolumns:"),u,i;for(u in n.columns)i=n.columns[u],i.name&&(r+="\n\t".concat(i.name,":").concat(i.type));t.alert(r)}function f(){var t=i.ref.getBody(),u=t.getValue();r.importTableFromCSV(n,u)}function e(){i.ref.close()}var i=new t.RefUI,r=this;t.showView({view:"window",move:!0,width:700,height:400,id:i.id,head:{view:"toolbar",margin:-4,cols:[t.label(t.loc.Excel.Insert),t.button(t.loc.Excel.Schema).Click(u),t.button(t.loc.Excel.InsertLabel).Click(f),{},t.icon("times-circle").Click(e),]},modal:!0,position:"center",body:{view:"textarea",placeholder:t.loc.Excel.Label}})},r.prototype.importTableFromCSV=function(n,i){var r;if(i){var f=webix.csv.parse(i),e=n.columns,u=this.ref,o=function(t){var c=f[t],r,o,s,i,l,h,a;if(c.join("").replace(" ","")!==""){for(r=n.data?webix.copy(n.data):{},o=0;o<c.length;o++)(s=e[o],s.import!==!1)&&(i=c[o],s.type=="float"&&(i=parseFloat(i.replace(",","."))),s.type=="int"&&(i=parseInt(i)),r[s.name]=i);if(n.key&&(l=r[n.key],l&&(h=u.find(function(t){return t[n.key]===l}),h&&h.length>0)))return a=h[0],u.updateItem(a.id,r),"continue";u.add(r)}};for(r=0;r<f.length;r++)o(r);webix.message(t.loc.Excel.ResultLabel)}},r.prototype.exportToCSV=function(n){var i=this.ref,r=this.getExportCSV(i,n);t.showView({view:"window",move:!0,width:700,height:400,id:"exportWindow",head:{view:"toolbar",margin:-4,cols:[{view:"label",label:t.loc.Excel.Help},{view:"icon",icon:"times-circle",click:"$$('exportWindow').close();"}]},modal:!0,position:"center",body:{view:"textarea",placeholder1:t.loc.Excel.Label,value:r}})},r.prototype.exportToFileCSV=function(t){var i=this.ref,r=this.getExportCSV(i,t,";");n.Web.download(r,"csv file.csv","text/csv")},r.prototype.getExportCSV=function(n,t,i){var u,r,f,e,o;i===void 0&&(i="\t");u=[];r=[];for(f in t.columns)e=t.columns[f],r.push(e.name);return o=r.join(i),u.push(o),n.eachRow(function(f){var e,o;r=[];e=t.columns;e.forEach(function(t){var i=n.getText(f,t.name);t.type=="float"&&(i=(i+"").replace(",","").replace(".",","));t.type=="int"&&(i=""+(i|0));r.push(i)});o=r.join(i);u.push(o)}),u.join("\n")},r}(t.RefTable);t.RefGrid=i})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.asTreeStore=function(){return this.get()},i.prototype.asTreeList=function(){return this.get()},i.prototype.asTreeAPI=function(){return this.get()},i.prototype.configTree=function(){return new n.Configs.TreeConfig(this)},i.prototype.configTreeTable=function(){return new n.Configs.TreeTableConfig(this)},i.prototype.btnAddTop=function(){var t=this;return n.icon("plus").Click(function(){return t.addTop()}).Tooltip(n.loc.Tooltips.AddTop)},i.prototype.btnAddSub=function(){var t=this;return n.icon("plus-circle").Click(function(){return t.addSub()}).Tooltip(n.loc.Tooltips.AddSub)},i.prototype.btnExpand=function(){var t=this;return $u.icon("plus-square-o").Click(function(){return t.expand(t.getSelectedId())}).Tooltip(n.loc.Tooltips.Expand)},i.prototype.btnCollapse=function(){var t=this;return $u.icon("minus-square-o").Click(function(){return t.collapse(t.getSelectedId())}).Tooltip(n.loc.Tooltips.Collapse)},i.prototype.expand=function(n){var t=this.ref;n?(t.open(n),t.data.eachSubItem(n,function(n){return t.open(n.id)})):t.openAll()},i.prototype.collapse=function(n){var t=this.ref;n?(t.close(n),t.data.eachSubItem(n,function(n){return t.close(n.id)})):t.closeAll()},i.prototype.getParentId=function(n){var t,i;return n.$parent?(t=n.$parent.row,t||(t=n.$parent),i=this.ref.getItem(t),i.id):null},i.prototype.setOrder=function(n){this.scheme({order:n,index:n})},i.prototype.reindex=function(n,t){var r=this.ref,i=0;r.data.eachChild(n,function(n){(n.$index!=i||t&&n.id==t)&&(n.$index=i,r.updateItem(n.id,n));i++})},i.prototype.addTop=function(n){var t,i,r,u;n===void 0&&(n=this.create());t=this.ref.data.getTopRange();i=0;t.length>0&&(r=t[t.length-1],i=r.index+1);this.setOrder(i);u=this.ref.add(n,-1)},i.prototype.addSub=function(n,t){var i,u,r;return n===void 0&&(n=this.create()),i=this.ref,t||(t=i.getSelectedId()),t?(r=i.getItem(t),this.setOrder(r.$count),r.$count||(r.open=!0),u=i.add(n,-1,t)):u=this.addTop(n),u},i.prototype.getBranchIndex=function(n,t){return this.ref.getBranchIndex(n,t)},i.prototype.create=function(){return{}},i.prototype.shiftLeft=function(n){if(!n.$parent)return webix.message("Достигнут верхний уровень");var t=this.getItem(n.$parent),i=this.asTreeList(),r=i.getBranchIndex(t.id,t.$parent)+1;i.move(n.id,r,undefined,{parent:t.$parent});this.updateRow(n.id,{$parent:t.$parent,$index:t.$index+1})},i.prototype.shiftRight=function(n){var t=this.get().getPrevSiblingId(n.id);if(!t)return webix.message("Нет предыдущего элемента");this.asTreeList().move(n.id,-1,undefined,{parent:t});this.updateRow(n.id,{$parent:t,$index:0});this.expand(t)},i.prototype.edit=function(n){this.asEditAbility().edit(n)},i}(n.RefTable);n.RefTree=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(i){i===void 0&&(i=n.loc.Controls.Window);var r=t.call(this)||this;return r.head=i,r.modal=!0,r.move=!0,r.resize=!0,r.position="center",r.headerLabel=new n.RefUI,r}return __extends(i,t),i.prototype.config=function(n){var i=this,t={view:"window",id:this.id,head:{view:"toolbar",margin:-4,cols:[{view:"label",label:this.head,id:this.headerLabel.id},{view:"icon",icon:"times-circle",click:function(){return i.hide()}},]},modal:this.modal,move:this.move,position:this.position,resize:this.resize,body:n};return this.cfg=t,t},i.prototype.setHead=function(n){this.headerLabel.set({label:n})},i.prototype.show=function(n){this._ref||(this._ref=webix.ui(this.cfg));this._ref.show();n&&this.setHead(n)},i.prototype.hide=function(){this.onHide&&this.onHide();this.ref.hide()},i}(n.RefContainer);n.RefWin=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.config=function(t,i){var r=new n.Configs.FormConfig(this);return r.view="activeTemplate",r.template=t,i&&(r.data=i),r},i}(n.RefDataContainer);n.RefTemplate=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(n){var i=t.call(this)||this;return i.template=n,i}return __extends(i,t),i.prototype.config=function(){var t=new n.Configs.FormConfig(this);return t.view="activeHtmlForm",t.template=this.template,t},i}(n.RefForm);n.RefHtmlForm=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(){var n=webix})(t=n.UI||(n.UI={}))}(It||(It={}));$u=It.UI,function(n){var t;(function(n){function t(n){var t=function(n){return n.visible==undefined||n.visible===!0},r=n.filter(t),i=[];return n.forEach(function(n){n.data&&n.visible&&(n.data=n.data.filter(t),n.visible=n.data&&n.data.length>0);(n.visible||n.visible==undefined)&&i.push(n)}),i}function i(i){var r=new n.RefTree,u=n.icon("bars").Size(37).Css("app_button").Click(function(){return r.ref.toggle()});return r.configTree().extend({view:"sidebar",data:t(i),button:u})}function r(n){return n.button}function u(i,r,u){function e(n){var i=parseInt(n),t=f.getItem(n);t&&(u&&u.set({data:t,label:"<b>".concat(t.value,"<\/b>: ").concat(t.description)}),r&&t.module)&&r.open({module:t.module,view:t.view,oid:t.objid})}var f=new n.RefTree,o=t(i);return f.configTree().extend({data:o,select:!0,multiselect:!1,on:{onAfterSelect:e}})}n.getVisibleMenuTree=t;n.sidebarMenu=i;n.sidebarButton=r;n.treeMenu=u})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){var i=function(){function i(){this.view=new t.MultiView;this.defaultView="default"}return i.prototype.open=function(t){var r,i,u;t.view||(t.view=this.defaultView);location.hash&&(r=n.Web.parseUrlQuery(location.hash),webix.extend(t,r,!0));i=t.key;i||(i="".concat(t.module,".").concat(t.view));u=this.view.open(i,t)},i.prototype.close=function(){this.view.close();window.history.back()},i.prototype.$deactivate=function(){this.view&&this.view.$deactivate()},i.prototype.routers=function(t){function i(t,i,f){var e,o;(i===void 0&&(i=""),f===void 0&&(f=0),e=n.Web.parseUrlQuery(location.hash),delete e.view,delete e.module,o="".concat(t,":").concat(i,":").concat(f,":").concat(JSON.stringify(e)),r!=o)&&(r=o,u.open({module:t,view:i,oid:f}))}var r="",u=this;routie("!/:module/:view/:oid",function(n,t,r){r=="null"&&(r=null);i(n,t,r)});routie("!/:module/:view",function(n,t){i(n,t)});routie("!/:module",function(n){i(n)});routie("*",function(){i(t)})},i}();t.Navigator=i})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){function i(n,t){var r,i,u,f;if(n=n.trim(),r=window[n],!r)throw new Error("module ".concat(n," not found"));if(i=r.create,!i)throw new Error("".concat(n,".create() function not found"));if(u=i[t],f=u?u():i(t),!f)throw new Error("".concat(n,".create() returns null for type: ").concat(t));return f}function r(n,i,r,u){i===void 0&&(i=Symbols.pencil);r===void 0&&(r="#id#");u===void 0&&(u="edit");var f=r.indexOf("#")>=0?"{common.href}/":t.Configs.HREF_PREFIX+"/";return i.link(f+n+"/"+u+"?oid="+r)}function u(n,i){n===void 0&&(n=Symbols.pencil);var r=i.indexOf("#")>=0?"{common.href}/":t.Configs.HREF_PREFIX+"/";return n.link(r+i)}function f(i,r,u){u===void 0&&(u=!1);var f="".concat(t.Configs.HREF_PREFIX,"/").concat(i.module);i.view&&(f+="/".concat(i.view));i.oid&&(f+="/".concat(i.oid));n.Web.openUrl(f,r,u)}function e(n,i,r,u){i===void 0&&(i=t.loc.Controls.Window);r===void 0&&(r=!0);u===void 0&&(u=!0);return new $u.RefWin(i).config(n)}function o(n){return function(){var t=this.config.$masterId;n(t)}}t.createModuleView=i;t.getViewLink=r;t.getLink=u;t.openView=f;t.uidialog=e;t.callActiveContent=o})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(){function t(){this.refs=[]}return t.prototype.ref=function(t,i){i===void 0&&(i=!0);var r=this.refs[t];return!r&&i&&(r=new n.RefUI,this.refs[t]=r),r},t.prototype.visible=function(n,t){var i=this.ref(n,!1);i&&i.visible(t)},t.prototype.enable=function(n,t){var i=this.ref(n,!1);i&&i.enable(t)},t}();n.UIManager=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){function r(n){return n?typeof n=="string"?n:(n.$css||(n.$css=webix.html.createCss(n)),n.$css):""}function f(t){for(var r,f,e,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];r={};u.forEach(function(n){return webix.extend(r,n,!0)});f=n.Web.args2style(r);e="".concat(t," { ").concat(f," }");webix.html.addStyle(e)}function e(n,t){return(new i).tag(n).attr(t)}var u,i;t.css={table:{table:{display:"table"},row:{display:"table-row"},cell:{display:"table-cell"}},overflow:{auto:{overflow:"auto"},hidden:{overflow:"hidden"},visible:{overflow:"visible"},scroll:{overflow:"scroll"}},pos:{margin:function(n){return{margin:n+"px"}},padding:function(n){return{margin:n+"px"}},marginp:function(n){return{margin:n+"%"}},paddingp:function(n){return{margin:n+"%"}},relative:{position:"relative"},absolute:{position:"absolute"},fixed:{position:"fixed"},left:{float:"left"},right:{float:"right"},clear_left:{clear:"left"},clear_right:{clear:"right"},clear_both:{clear:"both"},none:{display:"none"},flex:{display:"-webkit-flex flex"},inline:{display:"inline-block"}}};u=1;t.getCssStyle=r;t.setCssStyle=f;t.html=e;i=function(){function t(){this._tag="div"}return t.prototype.tag=function(n,t){return n?(this._checkRaw(),this._tag=n,this.attr(t),this):this},t.prototype.text=function(n){return n?(this._checkRaw(),this._text=n,this):this},t.prototype.attr=function(n){return n?(this._checkRaw(),this._attrs=this._attrs?webix.extend(this._attrs,n,!0):n,this):this},t.prototype.style=function(){for(var i,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t?(this._checkRaw(),i=this._style||{},t.forEach(function(n){webix.extend(i,n,!0)}),this._style=i,this):this},t.prototype.css=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._checkRaw(),this._class=this._class||"",t.forEach(function(n){i._class+=r(n)+" "}),this},t.prototype.raw=function(n){return this._raw=n,this},t.prototype.tags=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._checkRaw(),this._tags=this._tags||[],this._tags=this._tags.concat(t),this},t.prototype.toHtml=function(){if(this._raw)return this._raw;var i=this._attrs?" "+n.Web.args2attr(this._attrs):"",r=this._style?' style="'.concat(n.Web.args2style(this._style),'"'):"",u=this._class?" class='".concat(this._class,"'"):"",t="<".concat(this._tag).concat(i).concat(u).concat(r,">").concat(this._text||"");return this._tags&&this._tags.forEach(function(n){return t+=n.toHtml()}),t+="<\/".concat(this._tag,">")},t.prototype.div=function(n){return this._checkRaw(),this.tag("div",n)},t.prototype._checkRaw=function(){this._raw&&$u.w.error("Raw html conflict with tag args, use .text()")},t}();t.HtmlTag=i})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(){function n(n){this._owner=n;this.objectId="undefined";this.first=!0;this.active=!1;this._views=[];n&&n._views.push(this)}return n.prototype.$config=function(){return{template:"$config is empty!!",css:"it-error"}},n.prototype.$init=function(){this._views.forEach(function(n){return n.$init()})},n.prototype.owner=function(n){return this._owner=n,n._views.push(this),this},n.prototype.$activate=function(n){if(this._owner||this.parseId(n),this._views.forEach(function(t){return t.$activate(n)}),this.onactivate)this.onactivate(n);this.active=!0},n.prototype.$deactivate=function(){this._views.forEach(function(n){return n.$deactivate()});this.active=!1},n.prototype.parseId=function(n){this.args=n;n&&this.objectId!=n.oid&&this.$reload(n.oid)},n.prototype.$reload=function(n){this.objectId=n},n.prototype.show=function(){var n=this.$config();return webix.ui(n),this},n.prototype._getUrlArgs=function(){var n=webix.copy(this.args);return delete n.view,delete n.oid,delete n.module,n},n.prototype.openWindow=function(){this.win.show()},n.Empty={height:1},n}();n.View=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(n){function t(t){var i=n.call(this)||this;return i.text=t,i}return __extends(t,n),t.prototype.$config=function(){return{template:this.text}},t}(n.View);n.TextEditView=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t!==null&&t.apply(this,arguments)||this;return i.navigator=new n.Navigator,i}return __extends(i,t),i.prototype.$reload=function(n){t.prototype.$reload.call(this,n)},i.prototype.$deactivate=function(){t.prototype.$deactivate.call(this);this.currentView&&this.currentView.obj&&this.currentView.obj.$deactivate();this.navigator.$deactivate()},i.prototype.setView=function(n,t){return this.current=n,this.select({oid:t})},i.prototype.select=function(n){if(n){n=webix.extend(n,this.current,!0);var t=n.module+"."+n.view;return this.currentView=this.navigator.view.open(t,n),this.currentView}},i}(n.View);n.SelectorView=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){var i=t!==null&&t.apply(this,arguments)||this;return i.tree=new n.RefTree,i.views=new n.MultiView,i.settings={width:250},i}return __extends(i,t),i.prototype.$config=function(){t.prototype.$config.call(this);var i=this,n=this.menu();return{template:"My Profile",borderless:!0,cols:[this.configTree(n),{view:"resizer"},this.views.$config(),]}},i.prototype.$init=function(){return this.tree.expand(),t.prototype.$init.call(this)},i.prototype.configTree=function(n){var t=this;return{view:"tree",id:t.tree.id,width:t.settings.width,select:!0,navigation:!0,data:n,on:{onAfterSelect:function(n){return t.onChangeTopic(n)}}}},i.prototype.$activate=function(n){if(t.prototype.$activate.call(this,n),this.first)this.tree.selectFirst();else{var i=this.tree.ref.getSelectedId();this.onChangeTopic(i)}},i.prototype.onChangeTopic=function(n){var r=this,t=r.tree.getItem(n),i,u;t.module&&(i=t.key,i||(i=t.module+"."+t.view),u=webix.copy(t),u.oid=r.objectId,r.views.open(i,u))},i}(n.View);n.TreeEditView=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(n,i){n===void 0&&(n="");i===void 0&&(i="");var r=t.call(this)||this;return r.source=n,r.title=i,r.template=new $u.RefUI,r.scrollable=!1,r}return __extends(i,t),i.prototype.$init=function(){return t.prototype.$init.call(this),{title:this.title}},i.prototype.$config=function(){t.prototype.$config.call(this);var r={view:"template",id:this.template.id,template:this.source,autoheight:!0,borderless:!0},n={type:"clean",rows:[r,{},]},i=n;return this.scrollable&&(i={view:"scrollview",borderless:!0,body:n}),i},i.prototype.scroll=function(n){return n===void 0&&(n=!0),this.scrollable=n,this},i.prototype.setHtml=function(n){this.template.ref.setHTML(n)},i.prototype.loadUrl=function(t){try{this.template.set({template:"http->"+t})}catch(i){this.template.set({template:n.coreLocale.Err.TemplateError+i.message})}},i}(n.View);n.HtmlView=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(t){var i=function(i){function r(){var r=i!==null&&i.apply(this,arguments)||this;return r.onOpen=new n.Event,r.refview=new t.RefUI,r.tabs={},r}return __extends(r,i),r.prototype.$config=function(){i.prototype.$config.call(this);return new t.Configs.MultiViewConfig(this.refview.id)},r.prototype.open=function(n,i){var r,u,o,f,e;return this.$deactivate(),r=this.tabs[n],this.lastKey=n,r?r.show():(u=i.$view||t.createModuleView(i.module,i.view),o=u.$config(),f=this.refview.ref.addView(o),r=$$(f),r.show(),r._viewInit=u.$init(),r._viewObject=u,r._viewid=f,this.tabs[n]=r,this.onclose&&u.onclose==null&&(u.onclose=this.onclose),console.log("create new view: ",n)),u=r._viewObject,u.$activate(i),u.first=!1,e={init:r._viewInit,obj:u,view:r},r._viewInit&&r._viewInit.title&&(document.title=r._viewInit.title),this.onOpen.call(e),e},r.prototype.close=function(){var n=this.tabs[this.lastKey]},r.prototype.$activate=function(n){i.prototype.$activate.call(this,n);var t=this.getLastViewObject();t&&t.$activate(n)},r.prototype.$deactivate=function(){i.prototype.$deactivate.call(this);var n=this.getLastViewObject();n&&n.$deactivate()},r.prototype.getLastViewObject=function(){if(!this.lastKey)return null;var n=this.tabs[this.lastKey];return n?n._viewObject:null},r}(t.View);t.MultiView=i})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){var t=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n.form=new $u.RefForm,n._values={},n}return __extends(i,t),Object.defineProperty(i.prototype,"values",{get:function(){return this._values},enumerable:!1,configurable:!0}),i.prototype.$config=function(t,i){var r=this;return t===void 0&&(t=n.loc.Controls.Ok),i===void 0&&(i=n.loc.Controls.Clear),$u.cols($u.button(t).Type("form").Click(function(){return r.$action()}),$u.button(i).Click(function(){return r.$clear()}))},i.prototype.onAction=function(n){return this._onaction=n,this},i.prototype.onClear=function(n){return this._onclear=n,this},i.prototype.$action=function(){if(!this.form.validate())return!1;var n=this.form.values();return this.invokeAction(n),!0},i.prototype.$clear=function(){this.form.ref&&(this.form.clear(),this._values={},this._onclear&&this._onclear())},i.prototype.hide=function(){this.form.visible(!1)},i.prototype.invokeAction=function(n){this._values=n;this._onaction&&this._onaction(webix.copy(n))},i}(n.View);n.PopupView=t})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t;(function(n){function t(n){var t=webix.ui(n);return t.show(!0),t}function i(n){(n===void 0&&(n=!0),n)&&(webix.CustomScroll&&!webix.env.mobile?webix.CustomScroll.init():console.log("custom scroll is undefined"))}n.showView=t;n.initScroll=i})(t=n.UI||(n.UI={}))}(It||(It={})),function(n){var t=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n.form=new $u.RefForm,n}return __extends(i,t),i.prototype.$config=function(){t.prototype.$config.call(this);var i=this,n=$u.loc.System,r=this.form.config().Labels(120,"left").extend({width:300,padding:10,borderless:!1,elements:[$u.label(n.LoginHeader.tag("h3")).Size(0,70),{height:10},$u.element("login").Label(n.LoginLabel).Value(It.Web.auth.logins.last).Require(),$u.element("password").Label(n.PasswordLabel).Type("password").Require(),{height:10},$u.cols({},$u.button(n.LoginOK).Type("form").Click(function(){return i.login()}).Hotkey("enter"),$u.button(n.LoginCancel).Click(It.Web.goReturnUrl)),]});return $u.viewCenter(r)},i.prototype.login=function(){if(this.form.validate()){var t=this.form.values(),i=n.db.login(t);i&&(It.Web.auth.tokens.save(i.token),It.Web.auth.logins.save(t.login),It.Web.goReturnUrl())}},i}($u.View);n.LoginView=t}(auth_logins||(auth_logins={})),function(n){function i(){var n=new $u.Navigator;n.view.show();n.routers("auth_logins")}function r(n){var t=It.Web.auth.tokens.current?n||It.Web.auth.logins.last:$u.loc.System.NotLogged;return $u.template(t)}function u(n){n===void 0&&(n="auth_logins");var t=It.Web.auth.tokens.current?$u.loc.System.Logout.link("./".concat(n,"#!/").concat(n,"/logout")):$u.loc.System.LoginLink.link("./".concat(n));return $u.template(t)}n.create={"default":function(){return new n.LoginView},reg:function(){return new n.RegistrationView},login:function(){return new n.LoginView},logout:function(){return confirm("Выйти из системы?")?(n.db.logout(),It.Web.auth.tokens.clear(),It.Web.openUrl("/"),new $u.HtmlView("Вы вышли из системы")):(It.Web.openUrl("/"),new $u.HtmlView("Отмена выхода из системы"))}};var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.login=function(n){return this.post("login",n)},t.prototype.logout=function(){return this.post("logout")},t.prototype.registration=function(n){return this.post("registration",n)},t.prototype.check=function(){return this.load("check")},t}(It.Web.WebSource);n.AuthSource=t;n.db=new t("auth");n.run=i;n.btLoginName=r;n.btLoginOut=u}(auth_logins||(auth_logins={})),function(n){var t=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n.form=new $u.RefForm,n}return __extends(i,t),i.prototype.$config=function(){t.prototype.$config.call(this);var i=this,n=$u.loc.System,r=this.form.config().Labels(120,"left").extend({width:300,padding:10,borderless:!1,elements:[$u.label(n.LoginHeader.tag("h3")).Size(0,70),{height:10},$u.element("login").Label(n.LoginLabel).Value(It.Web.auth.logins.last).Require(),$u.element("password").Label(n.PasswordLabel).Type("password").Require(),$u.element("password2").Label(n.PasswordLabel2).Type("password").Require(),{height:10},$u.cols({},$u.button(n.LoginOK).Type("form").Click(function(){return i.register()}).Hotkey("enter"),$u.button(n.LoginCancel).Click(It.Web.goReturnUrl)),]});return $u.viewCenter(r)},i.prototype.register=function(){if(this.form.validate()){var t=this.form.values(),i=n.db.registration(t);webix.alert($u.loc.System.RegisterResult)}},i}($u.View);n.RegistrationView=t}(auth_logins||(auth_logins={})),function(n){function t(){if(!n.skin)return!1;try{return It.Web.loadCSS("./lib/webix/skins/".concat(n.skin,".css")),webix.skin.set(n.skin),!0}catch(t){return webix.storage.local.remove("skin"),!1}}function i(){function t(n){webix.storage.local.put("skin",n);location.reload()}return $u.element().AsSelect(n.skins,"select").Value(n.skin).OnChange(function(n){return t(n)})}n.skins=[{id:"air",value:"Air"},{id:"aircompact",value:"Air Compact"},{id:"clouds",value:"Clouds"},{id:"compact",value:"Compact"},{id:"contrast",value:"Contrast"},{id:"flat",value:"Flat"},{id:"material",value:"Material"},{id:"glamour",value:"Glamour"},{id:"light",value:"Light"},{id:"metro",value:"Metro"},{id:"terrace",value:"Terrace"},{id:"touch",value:"Touch"},{id:"web",value:"Web"},];n.skin=webix.storage.local.get("skin");n.load=t;n.selector=i}(skins||(skins={})),function(n){var t;(function(n){var t=function(t){function i(n){var i=t.call(this)||this;return i._Creator=n,i._RefContainer=new $u.RefContainer,i}return __extends(i,t),i.prototype.$config=function(){return n.rows().Ref(this._RefContainer)},i.prototype.reload=function(n){var t=this.buildRuleViews(n);this._RefContainer.visible(!1);this._RefContainer.set({rows:t},!0);n.forEach(function(n){n.$view.$reload(n)});this._RefContainer.visible(!0)},i.prototype.buildRuleViews=function(n){var i=this,t=[];return n.forEach(function(n){var r=i._Creator(n),u=r.$config();n.$view=r;n.$config=u;t.push(u)}),t.push({}),t},i}($u.View);n.ContainerView=t})(t=n.UI||(n.UI={}))}(It||(It={}));